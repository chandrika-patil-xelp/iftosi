<?php include 'vendorHead.html'; ?>
<div class="mainContainer fLeft">
    <?php include 'HeaderVendor.html'; ?>
    
    <!------Dashboard Content------>
    <div id='dashboard' class="contentCont fLeft dn dashboard">
        <div class="wrapperMax">Dashboard</div>
    </div>
    <!------Dashboard Content End------>
    
    
    
    
    <!------Product Content------>
    <div id='product' class="contentCont fLeft dn">
        <div class="wrapperMax">
            <div id='diamondPrds' class="forPrds fLeft fmOpenR">
                <?php include 'vProducts_Diamond.html'; ?>
            </div>
            <div id='jewelleryPrds' class="forPrds fLeft fmOpenR dn">
                <?php include 'vProducts_jewellery.html'; ?>
            </div>
            <div id='bullionPrds' class="forPrds fLeft fmOpenR dn">
                <?php include 'vProducts_bullion.html'; ?>
            </div>
        </div>
    </div>
    <!------Product Content End------>


    <!------Enquiry Contents ------>
    <?php include 'vendor_enquiries.html'; ?>

    <div class="v_Filters transition300 transit100X">
        <div class="closeFilter poR ripplelink" onclick="showEnqFilter()"></div>
        <div class="filterCont fLeft halfSize">
            <div class="fLeft optionTitle fmOpenR">Date</div>
            <div class="filterByDate fLeft fmOpenRs">
                <div class="datadiv fLeft">
                    <div class="toorTxt fLeft">From Date</div>
                    <input type="text" id="dateFrom" class="fLeft prdSeachTxt" readonly value="2015-09-15" onfocus="showCalander('dateFrom')" onkeyup="checkToHide(event);"></div>
                <div class="datadiv fRight">                            
                    <div class="toorTxt fLeft">To Date</div>
                    <input type="text" id="dateTo"  class="fLeft prdSeachTxt" readonly value="2015-10-15" onfocus="showCalander('dateTo')" onkeyup="checkToHide(event);">
                </div>
                <div id="datepicker" class="dn"></div>
            </div>
        </div>
        <div class="filterCont fLeft halfSize">
            <div class="fLeft optionTitle fmOpenR">Price</div>
            <div class="fLeft rangeCont">
                <div class="fLeft rangeDiv">
                    <input type="text" id="priceRange" class="fLeft rngInp irs-hidden-input" style="visibility: hidden;" readonly="">
                </div>
            </div>
        </div>
        <div class="filterCont fLeft ">
            <div class="fLeft optionTitle fmOpenR">Category</div>
            <div class="filterOptions fLeft fmOpenR">
                <div class="checkDiv fLeft">
                    <input type="checkbox" class="filled-in" id="diamonds">
                    <label for="diamonds">Diamonds</label>
                </div>
                <div class="checkDiv fLeft">
                    <input type="checkbox" class="filled-in" id="jewellery">
                    <label for="jewellery">Jewellery</label>
                </div>
                <div class="checkDiv fLeft">
                    <input type="checkbox" class="filled-in" id="bullions">
                    <label for="bullions">Bullions</label>
                </div>
            </div>
        </div>
        <div class="filterCont fLeft c666 pointer">Clear All</div>
    </div>

    <div id='enqFheader' class="prdHeader fLeft transition100 pLHtransit dn">
        <div class="wrapperMax">
            <div class="prdListHeader fLeft fmOpenR">
                <div class="date fLeft">Date</div>
                <div class="name fLeft">Name</div>
                <div class="email fLeft">Email</div>
                <div class="type fLeft">Category</div>
                <div class="barcode fLeft">Barcode</div>
                <div class="price fLeft bNone">Price</div>
            </div>
        </div>
    </div>
    <!------Enquiry Contents End------>

    
    <!------Product Headers------>
    <div id='diamondFheader' class="prdHeader fLeft transition100 pLHtransit dn">
        <div class="wrapperMax">
            <div class="prdListHeader fLeft fmOpenR">
                <div class="date fLeft">Date</div>
                <div class="barcode fLeft">Barcode</div>
                <div class="shape fLeft">Shape</div>
                <div class="color fLeft">Color</div>
                <div class="carats fLeft">Carats</div>
                <div class="clarity fLeft">Clarity</div>
                <div class="cert fLeft">Certificate</div>
                <div class="price fLeft">Price</div>
                <div class="acct fLeft">Action</div>
            </div>
        </div>
    </div>
    <div id='jewelleryFheader' class="prdHeader fLeft transition100 pLHtransit dn">
        <div class="wrapperMax">
            <div class="prdListHeader fLeft fmOpenR">
                <div class="date fLeft">Date</div>
                <div class="barcode fLeft">Barcode</div>
                <div class="degno fLeft">Design No.</div>
                <div class="metal fLeft">Metal</div>
                <div class="catg fLeft">Category</div>
                <div class="subType fLeft">Sub Category</div>
                <div class="price fLeft">Price</div>
                <div class="acct fLeft">Action</div>
            </div>  
        </div>
    </div>
    <div id='bullionFheader' class="prdHeader fLeft transition100 pLHtransit">
        <div class="wrapperMax">
            <div class="prdListHeader fLeft fmOpenR">
                <div class="date fLeft">Date</div>
                <div class="barcode fLeft">Barcode</div>
                <div class="btype fLeft">Type</div>
                <div class="metal fLeft">Metal</div>
                <div class="purity fLeft">Purity</div>
                <div class="weight fLeft">Weight</div>
                <div class="price fLeft">Price</div>
                <div class="acct fLeft">Action</div>
            </div>
        </div>
    </div>
    <!------Product Headers------>

    <!------Settings Content------>
    <div id='settings' class="contentCont fLeft dn settings dn">
        <div class="wrapperMax">Settings</div>
    </div>
    <!------Settings Content End------>
</div>
<script type="text/javascript" src="<?= $jvs['velocity']; ?>"></script>
<script type="text/javascript" src="<?= $jvs['jqryUi']; ?>"></script>
<script type="text/javascript" src='tools/js/cms/vendor_landing.js'></script>

<script>
    var loadDiamont = true;
    var diamondPage=1;
    $(window).scroll(function () {        	
        if ($(window).scrollTop() == ( $(document).height() - $(window).height())) {
            if(active=='diamondFheader' && loadDiamont) {
                loadDiamonts();
            }
            if(active=='jewelleryFheader' && loadJewel) {
                loadJewels();
            }
            if(active=='bullionFheader' && loadBullion) {
                loadBullions();
            }
        }
    });
    loadDiamonts();
    function loadDiamonts() {
        $.ajax({url: common.APIWebPath() + "index.php?action=getVproducts&vid=3&page="+ diamondPage +"&limit=15&catid=10000", success: function (result) {
            loadDiamondCallback(result);
        }});
    }
    function loadDiamondCallback(res) {
        var obj = jQuery.parseJSON(res);
        if(obj['results']!='') {
            var total = obj['results']['total_products'];
            $('#totalDiamonds').text(total);
            var total_pages = obj['results']['total_pages'];
            var len = obj['results']['products'].length;
            var i = 0;
            var str = '';
            while(i<len) {
                str += generateDiamondList(obj['results']['products'][i]);
                i++;
            }
            $('#diamondList').append(str);
            diamondPage++;
        } else {
            loadDiamont = false;
        }
    }
    function generateDiamondList(obj) {
            var date=obj['update_time'].split(' ');
            var str='<li>';
                str +='<div class="date fLeft"> ';
                    str +='<span class="upSpan">'+ date[0] +'</span>';
                    str +='<span class="lwSpan">'+ date[1] +'</span>';
                str +='</div>';
                str +='<div class="barcode fLeft">';
                    str +='<span class="upSpan">'+ obj['barcode'] +'</span>';
                    str +='<span class="lwSpan"><a href="http://localhost/iftosi//gia-round-clarity-IF/pid-10000">View Details</a></span>';
                str +='</div>';
                str +='<div class="shape fLeft">'+ obj['shape'] +'</div>';
                str +='<div class="color fLeft">'+ obj['color'] +'</div>';
                str +='<div class="carats fLeft">'+ obj['carat'] +'</div>';
                str +='<div class="clarity fLeft">'+ obj['clarity'] +'</div>';
                str +='<div class="cert fLeft">'+ obj['cert'] +'</div>';
                str +='<div class="price fLeft fmOpenB">&#8377;'+ obj['price'] +'</div>';
                str +='<div class="acct fLeft">';
                    str +='<center>';
                        str +='<div class="deltBtn poR ripplelink"></div>';
                        str +='<div class="editBtn poR ripplelink"></div>';
                        str +='<div class="soldBtn poR ripplelink fmOpenR">SOLD</div>';
                    str +='</center>';
                str +='</div>';
            str +='</li>';
        str +='';
        return str;
    }
    
    var loadJewel = true;
    var jewellPage=1;
    
    loadJewels();
    function loadJewels() {
        $.ajax({url: common.APIWebPath() + "index.php?action=getVproducts&vid=2&page="+ jewellPage +"&limit=15&catid=10001", success: function (result) {
            loadJewellCallback(result);
        }});
    }
    function loadJewellCallback(res) {
        var obj = jQuery.parseJSON(res);
        if(obj['results']!='') {
            var total = obj['results']['total_products'];
            $('#totalJewells').text(total);
            var total_pages = obj['results']['total_pages'];
            var len = obj['results']['products'].length;
            var i = 0;
            var str = '';
            while(i<len) {
                str += generateJewellList(obj['results']['products'][i]);
                i++;
            }
            $('#JewellList').append(str);
            jewellPage++;
        } else {
            loadJewel = false;
        }
    }
    function generateJewellList(obj) {
            var date=obj['update_time'].split(' ');
            var str='<li>';
                str +='<div class="date fLeft"> ';
                    str +='<span class="upSpan">'+ date[0] +'</span>';
                    str +='<span class="lwSpan">8:10 Pm</span>';
                str +='</div>';
                str +='<div class="barcode fLeft">';
                    str +='<span class="upSpan">'+ obj['barcode'] +'</span>';
                    str +='<span class="lwSpan"><a href="http://localhost/iftosi//gia-round-clarity-IF/pid-10000">View Details</a></span>';
                str +='</div>';
                str +='<div class="degno fLeft">'+ obj['lotref'] +'</div>';
                str +='<div class="metal fLeft">'+ obj['metal'].split('~')[0] +'</div>';
                str +='<div class="catg fLeft">'+ obj['category'][1]['cat_name'] +'</div>';
                str +='<div class="subType fLeft">'+ obj['category'][0]['cat_name'] +'</div>';
                str +='<div class="price fLeft fmOpenB">&#8377;'+ obj['price'] +'</div>';
                str +='<div class="acct fLeft">';
                    str +='<center>';
                        str +='<div class="deltBtn poR ripplelink"></div>';
                        str +='<div class="editBtn poR ripplelink"></div>';
                        str +='<div class="soldBtn poR ripplelink fmOpenR">SOLD</div>';
                    str +='</center>';
                str +='</div>';
            str +='</li>';
        str +='';
        return str;
    }
    
    var loadBullion = true;
    var bullionPage=1;
    
    loadBullions();
    function loadBullions() {
        $.ajax({url: common.APIWebPath() + "index.php?action=getVproducts&vid=2&page="+ bullionPage +"&limit=15&catid=10002", success: function (result) {
            loadBullionsCallback(result);
        }});
    }
    function loadBullionsCallback(res) {
        var obj = jQuery.parseJSON(res);
        if(obj['results']!='') {
            var total = obj['results']['total_products'];
            $('#totalBullions').text(total);
            var total_pages = obj['results']['total_pages'];
            var len = obj['results']['products'].length;
            var i = 0;
            var str = '';
            while(i<len) {
                str += generatBullionsList(obj['results']['products'][i]);
                i++;
            }
            $('#bullionsList').append(str);
            bullionPage++;
        } else {
            loadBullion = false;
        }
    }
    function generatBullionsList(obj) {
            var date=obj['update_time'].split(' ');
            var str='<li>';
                str +='<div class="date fLeft"> ';
                    str +='<span class="upSpan">'+ date[0] +'</span>';
                    str +='<span class="lwSpan">8:10 Pm</span>';
                str +='</div>';
                str +='<div class="barcode fLeft">';
                    str +='<span class="upSpan">'+ obj['barcode'] +'</span>';
                    str +='<span class="lwSpan"><a href="http://localhost/iftosi//gia-round-clarity-IF/pid-10000">View Details</a></span>';
                str +='</div>';
                str +='<div class="btype fLeft">'+ obj['type'] +'</div>';
                str +='<div class="metal fLeft">'+ obj['metal'].split('~')[0] +'</div>';
                str +='<div class="purity fLeft">'+ obj['gold_purity'] +'</div>';
                str +='<div class="weight fLeft">'+ obj['gold_weight'] +'</div>';
                str +='<div class="price fLeft fmOpenB">&#8377;'+ obj['price'] +'</div>';
                str +='<div class="acct fLeft">';
                    str +='<center>';
                        str +='<div class="deltBtn poR ripplelink"></div>';
                        str +='<div class="editBtn poR ripplelink"></div>';
                        str +='<div class="soldBtn poR ripplelink fmOpenR">SOLD</div>';
                    str +='</center>';
                str +='</div>';
            str +='</li>';
        str +='';
        return str;
    }
</script>

</body>
</html>