function loadDiamonds(a){a||(a=1),$.ajax({url:common.APIWebPath()+"index.php?action=getVproducts&vid="+uid+"&page="+a+"&limit=50&catid="+catid,success:function(b){loadDiamondCallback(b,a)}})}function loadDiamondCallback(a,b){var c=jQuery.parseJSON(a);if(""!=c.results){var d=c.results.total_products;$("#totalDiamonds").text(d);var e=c.results.total_pages,f="";if(0!=d){if(b<=e){e==diamondPage&&(loadDiamont=!1);for(var g=c.results.products.length,h=0;h<g;)f+=generateDiamondList(c.results.products[h]),h++;var i=pagination(c,b);diamondPage++,$("#DiamondsList").html(f),$("#DiamondsList").append(i)}}else f='<p class="noRecords"><span>Sorry! No Products Found!</span></p>',loadDiamont=!1,$("#DiamondsList").html(f),$("#DiamondsList").append(i);$(".pgComm").click(function(){$(".pgComm").removeClass("pgActive"),$(this).addClass("pgActive"),loadDiamonds($(this).text()),$("#pgno").val($(this).text()),$(this).text()>=1&&$(this).text()<=e&&$("html,body").animate({scrollTop:$(".prdResults").offset().top-100},300)}),$(".pPrev").bind("click",function(){var a=parseInt($("#pgno").val()),b=a-1;a>1?($("#pgno").val(b),loadDiamonds(b),b>=1&&b<=e&&$("html,body").animate({scrollTop:$(".prdResults").offset().top-100},300)):b=1}),$(".pNext").bind("click",function(){var a=parseInt($("#pgno").val()),b=a+1;a<parseInt($("#total_pageno").val())?($("#pgno").val(b),loadDiamonds(b),b>=1&&b<=e&&$("html,body").animate({scrollTop:$(".prdResults").offset().top-100},300)):b=parseInt($("#total_pageno").val())})}else loadDiamont=!1}function pagination(a,b){b*=1;var c="",d=a.results.total_products,e=Math.ceil(d/50),f=2;if(e>1){if(c+='<div class="fLeft pagination fmOpenR">',c+="<center>",c+='<div class="pPrev poR ripplelink">Previous</div>',e<7+2*f)for(var g=1;g<=e;g++)c+=g==b?'<div class="pgComm poR ripplelink pgActive">'+g+"</div>":'<div class="pgComm poR ripplelink">'+g+"</div>";else if(e>5+2*f)if(b<1+2*f){for(var g=1;g<4+2*f;g++)c+=g==b?'<div class="pgComm poR ripplelink pgActive">'+g+"</div>":'<div class="pgComm poR ripplelink">'+g+"</div>";c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgComm poR ripplelink">'+e+"</div>"}else if(e-2*f>b&&b>2*f){c+='<div class="pgComm poR ripplelink">1</div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>';for(var g=b-f;g<=b+f;g++)c+=g==b?'<div class="pgComm poR ripplelink pgActive">'+g+"</div>":'<div class="pgComm poR ripplelink">'+g+"</div>";c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgComm poR ripplelink">'+e+"</div>"}else{c+='<div class="pgComm poR ripplelink">1</div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>';for(var g=e-(2+2*f);g<=e;g++)c+=g==b?'<div class="pgComm poR ripplelink pgActive">'+g+"</div>":'<div class="pgComm poR ripplelink">'+g+"</div>"}c+='<div class="pNext poR ripplelink">Next</div>',c+="</center>",c+="</div>"}return c}function generateDiamondList(a){var b="",c="",d=a.product_name;null!=d&&""!=d&&"null"!=d||(d=a.barcode);var e=a.barcode;"null"!=e&&void 0!=e&&null!=e&&""!=e&&""!=e||(e="N-A");var f=a.b2b_price;f="null"==f||void 0==f||null==f||""==f||""==f||"0.00"==f?"N-A":"&#36;"+f;var g=a.price;g="null"==g||void 0==g||null==g||""==g||""==g||"0.00"==g?"N-A":"&#36;"+g;var h=a.update_time.split(" ");c+="<li>",c+='<div class="date fLeft">',c+='<span class="upSpan">'+h[0]+"</span>",c+='<span class="lwSpan">'+h[1]+"</span>",c+="</div>",c+='<div class="barcode fLeft">',c+='<span class="upSpan fmOpenB">'+e+"</span>";var i="";null==a.shape&&void 0===a.shape||(i=a.shape);var j="";return null!==i&&void 0!==i&&(j+=""!==j?"-"+i:i),null!==a.color&&void 0!==a.color&&(j+=""!==j?"-colour-"+a.color:"colour-"+a.color),null!==a.clarity&&void 0!==a.clarity&&(j+=""!==j?"-clarity-"+a.clarity:"clarity-"+a.clarity),null!==a.cert&&void 0!==a.cert&&(j+=""!==j?"-certified-"+a.cert:"certified-"+a.cert),c+=""!==j?'<span class="lwSpan"><a href="'+DOMAIN+j+"/did-"+a.id+'" target="_blank">View Details</a></span>':'<span class="lwSpan"><a href="'+DOMAIN+i+"/did-"+a.id+'" target="_blank">View Details</a></span>',c+="</div>",c+='<div class="shape fLeft">'+a.shape+"</div>",c+='<div class="carats fLeft fmOpenB">'+a.carat+"</div>",c+='<div class="color fLeft">'+a.color+"</div>",c+='<div class="clarity fLeft">'+a.clarity+"</div>",c+='<div class="cert fLeft">'+a.cert+"</div>",c+='<div class="price fLeft fmOpenB"><span class="fRight rueeImg">'+g+"</span></div>",c+='<div class="price fLeft fmOpenB"><span class="fRight rueeImg">'+f+"</span></div>",c+='<div class="acct fLeft poR">',1!=a.active_flag&&0!=a.active_flag||(b="inStockPrd"),3==a.active_flag&&(b="outStockPrd"),4==a.active_flag&&(b="soldStockPrd"),c+='<div class="dmyCnt fRight">',c+='<select id="isStock'+a.id+'" onchange="inStock('+a.id+',this.value);" value='+a.active_flag+' class="txtSelect fmOpenB '+b+' fLeft">',c+="<option "+(1==a.active_flag?"selected":"")+' class="arrow txtCenter" value="1">In Stock</option>',c+="<option "+(3==a.active_flag?"selected":"")+' class="arrow txtCenter" value="3">Out Of Stock</option>',c+="<option "+(4==a.active_flag?"selected":"")+' class="arrow txtCenter" value="4">Sold</option>',c+="</select>",c+='<div class="deltBtn showLeftHelp poR fRight ripplelink" onclick="showConfirmDelete('+a.id+',this)"><span class="tool_tip_left_35">Delete Product</span></div>',c+='<a href="'+DOMAIN+"index.php?case=diamond_Form&catid=10000&prdid="+a.id+'" target="_blank"><div class="editBtn showLeftHelp fRight poR ripplelink"><span class="tool_tip_left_35">Edit Product</span></div></a>',c+='<a href="'+DOMAIN+"upload-image/pid-"+a.id+"&c="+catid+'" target="_blank"><div class="uploadBtn showLeftHelp fRight poR ripplelink"><span class="tool_tip_left_35">Upload Image</span></div></a>',c+="</div>",c+='<div class="tltpBtn">',c+='<div class="tltpbox transition300">',c+='<div class="deltBtn  poR fRight ripplelink" onclick="showConfirmDelete('+a.id+',this)"></div>',c+='<a href="'+DOMAIN+"index.php?case=diamond_Form&catid=10000&prdid="+a.id+'" target="_blank"><div class="editBtn fRight poR ripplelink"></div></a>',c+='<a href="'+DOMAIN+"upload-image/pid-"+a.id+"&c="+catid+'" target="_blank"><div class="uploadBtn fRight poR ripplelink"></div></a>',c+='<select id="isStock'+a.id+'" onchange="inStock('+a.id+',this.value);" value='+a.active_flag+' class="txtSelect fmOpenB '+b+' fLeft">',c+="<option "+(1==a.active_flag?"selected":"")+' class="arrow txtCenter" value="1">In Stock</option>',c+="<option "+(3==a.active_flag?"selected":"")+' class="arrow txtCenter" value="3">Out Of Stock</option>',c+="<option "+(4==a.active_flag?"selected":"")+' class="arrow txtCenter" value="4">Sold</option>',c+="</select>",c+="</div>",c+="</div>",c+="</div>",c+="</li>",c+=""}function loadJewels(a){a||(a=1);var b=(new Date).getTime();$.ajax({url:common.APIWebPath()+"index.php?action=getVproducts&vid="+uid+"&page="+a+"&limit=50&catid="+catid+"&timestamp="+b,success:function(b){loadJewellCallback(b,a)}})}function loadJewellCallback(a,b){var c=jQuery.parseJSON(a);if(""!=c.results){var d=c.results.total_products;$("#totalJewells").text(d);var e=c.results.total_pages,f="";if(0!=d){if(b<=e){e==jewellPage&&(loadJewel=!1);for(var g=c.results.products.length,h=0;h<g;)f+=generateJewellList(c.results.products[h]),h++;var i=pagination(c,b);jewellPage++,$("#JewellsList").html(f),$("#JewellsList").append(i)}}else f='<p class="noRecords"><span>Sorry! No Products Found!</span></p>',loadJewel=!1,$("#JewellsList").html(f),$("#JewellsList").append(i);$(".pgComm").click(function(){$(".pgComm").removeClass("pgActive"),$(this).addClass("pgActive"),loadJewels($(this).text()),$("#pgno").val($(this).text()),$(this).text()>=1&&$(this).text()<=e&&$("html,body").animate({scrollTop:$(".prdResults").offset().top-100},300)}),$(".pPrev").bind("click",function(){var a=parseInt($("#pgno").val()),b=a-1;a>1?($("#pgno").val(b),loadJewels(b),b>=1&&b<=e&&$("html,body").animate({scrollTop:$(".prdResults").offset().top-100},300)):b=1}),$(".pNext").bind("click",function(){var a=parseInt($("#pgno").val()),b=a+1;a<parseInt($("#total_pageno").val())?($("#pgno").val(b),loadJewels(b),b>=1&&b<=e&&$("html,body").animate({scrollTop:$(".prdResults").offset().top-100},300)):b=parseInt($("#total_pageno").val())})}else loadJewel=!1}function generateJewellList(a){if(void 0!==a&&null!==a&&""!==a){var b="",c=a.product_name,d=a.shape;if(void 0!==a.category&&null!==a.category&&""!==a.category&&"undefined"!=typeof a.category)var e=a.category[0].cat_name,f=e;else var e="";var g=a.metal;if("Bangles/Bracelets"==e){var h=f.split("/");f=h.join("-"),e='<span class="upSpan">Bangles / Bracelets</span>'}if("Men's"==e){var i=f.split("'");f=i.join("-")}var j=a.barcode;void 0!=j&&null!=j&&""!=j&&"null"!=j||(j="N-A"),void 0!=c&&null!=c&&""!=c&&"null"!=c||(c=j),void 0!=d&&null!=d&&""!=d&&"null"!=d||(d="N/A"),void 0!=g&&null!=g&&""!=g&&"null"!=g||(g="N/A");var k="";null!==a.metal&&void 0!==a.metal&&(k+=""!==k?"-"+a.metal:a.metal),null!==f&&void 0!==f&&(k+=""!==k?"-"+encodeURIComponent(f):encodeURIComponent(f)),""!==a.gold_purity&&"null"!==a.gold_purity&&null!==a.gold_purity&&void 0!==a.gold_purity&&"undefined"!==a.gold_purity&&(k+=""!==k?"-"+a.gold_purity+"-Carat":a.gold_purity+"-Carat"),""!==a.gold_weight&&"null"!==a.gold_weight&&null!==a.gold_weight&&void 0!==a.gold_weight&&"undefined"!==a.gold_weight&&(k+=""!==k?"-"+common.number_format(a.gold_weight,0)+"-Grams":common.number_format(a.gold_weight,0)+"-Grams"),null!==a.cert&&void 0!==a.cert&&""!==a.cert&&(k+=""!==k?"-"+a.cert:a.cert);var l=a.update_time.split(" "),m="<li>";if(m+='<div class="date fLeft">',m+='<span class="upSpan">'+l[0]+"</span>",m+='<span class="lwSpan">'+l[1]+"</span>",m+="</div>",m+='<div class="barcode fLeft">',m+='<span class="upSpan fmOpenB">'+j+"</span>",m+=""!==k?'<span class="lwSpan"><a href="'+DOMAIN+k+"/jid-"+a.id+'" target="_blank">View Details</a></span>':'<span class="lwSpan"><a href="'+DOMAIN+a.cert+"/jid-"+a.id+'" target="_blank">View Details</a></span>',m+="</div>",m+='<div class="metal fLeft">'+g.split("~")[0]+"</div>",m+='<div class="catg fLeft">'+d+"</div>",m+='<div class="degno fLeft">'+a.dwt+"</div>",1e3==a.gold_weight)var n="1 Kgs";else if(a.gold_weight>1e3){a.gold_weight=parseFloat(a.gold_weight);var n=a.gold_weight/1e3;n=common.number_format(n,2)+" Kgs"}else{a.gold_weight=parseFloat(a.gold_weight);var n=common.number_format(a.gold_weight,2)+" Gms"}return m+='<div class="price fLeft fmOpenB"><span class="fRight rupeeImg">'+a.price+"</span></div>",m+='<div class="acct fLeft poR">',1!=a.active_flag&&0!=a.active_flag||(b="inStockPrd"),3==a.active_flag&&(b="outStockPrd"),m+='<div class="dmyCnt fRight">',m+='<select id="isStock'+a.id+'" onchange="inStock('+a.id+',this.value);" value='+a.active_flag+' class="txtSelect fmOpenR fLeft '+b+'">',m+='<option value="1" '+(1==a.active_flag?"selected":"")+">In Stock</option>",m+='<option value="3" '+(3==a.active_flag?"selected":"")+">Out Of Stock</option>",m+="</select>",m+='<div class="deltBtn showLeftHelp poR fRight" onclick="showConfirmDelete('+a.id+',this)"><span class="tool_tip_left_35">Delete Product</span></div>',m+='<a href="'+DOMAIN+"index.php?case=jewellery_Form&catid=10001&prdid="+a.id+'" target="_blank"><div class="editBtn showLeftHelp poR fRight"><span class="tool_tip_left_35">Edit Product</span></div></a>',m+='<a href="'+DOMAIN+"upload-image/pid-"+a.id+"&c="+catid+'" target="_blank"><div class="uploadBtn showLeftHelp poR ripplelink fRight"><span class="tool_tip_left_35">Upload Image</span></div></a>',m+="</div>",m+='<div class="tltpBtn">',m+='<div class="tltpbox transition300">',m+='<div class="deltBtn poR fRight ripplelink" onclick="showConfirmDelete('+a.id+',this)"></div>',m+='<a href="'+DOMAIN+"index.php?case=diamond_Form&catid=10000&prdid="+a.id+'" target="_blank"><div class="editBtn fRight poR ripplelink"></div></a>',m+='<a href="'+DOMAIN+"upload-image/pid-"+a.id+"&c="+catid+'" target="_blank"><div class="uploadBtn fRight poR ripplelink"></div></a>',m+='<select id="isStock'+a.id+'" onchange="inStock('+a.id+',this.value);" value='+a.active_flag+' class="txtSelect fmOpenR fLeft '+b+'">',m+='<option value="1" '+(1==a.active_flag?"selected":"")+">In Stock</option>",m+='<option value="3" '+(3==a.active_flag?"selected":"")+">Out Of Stock</option>",m+="</select>",m+="</div>",m+="</div>",m+="</div>",m+="</li>",m+=""}}function loadBullions(a){a||(a=1);var b=(new Date).getTime();$.ajax({url:common.APIWebPath()+"index.php?action=getVproducts&vid="+uid+"&page="+a+"&limit=50&catid="+catid+"&timestamp="+b,success:function(b){loadBullionsCallback(b,a)}})}function loadBullionsCallback(a,b){var c=jQuery.parseJSON(a);if(""!=c.results){var d=c.results.total_products;$("#totalBullions").text(d);var e=c.results.total_pages,f="";if(0!=d){if(b<=e){e==bullionPage&&(loadBullion=!1);for(var g=c.results.products.length,h=0;h<g;)f+=generatBullionsList(c.results.products[h]),h++;var i=pagination(c,b);bullionPage++,$("#BullionsList").html(f),$("#BullionsList").append(i)}}else f='<p class="noRecords"><span>Sorry! No Products Found!</span></p>',loadBullion=!1,$("#BullionsList").html(f),$("#BullionsList").append(i);$(".pgComm").click(function(){$(".pgComm").removeClass("pgActive"),$(this).addClass("pgActive"),loadBullions($(this).text()),$("#pgno").val($(this).text()),$(this).text()>=1&&$(this).text()<=e&&$("html,body").animate({scrollTop:$(".prdResults").offset().top-100},300)}),$(".pPrev").bind("click",function(){var a=parseInt($("#pgno").val()),b=a-1;a>1?($("#pgno").val(b),loadBullions(b),b>=1&&b<=e&&$("html,body").animate({scrollTop:$(".prdResults").offset().top-100},300)):b=1}),$(".pNext").bind("click",function(){var a=parseInt($("#pgno").val()),b=a+1;a<parseInt($("#total_pageno").val())?($("#pgno").val(b),loadBullions(b),b>=1&&b<=e&&$("html,body").animate({scrollTop:$(".prdResults").offset().top-100},300)):b=parseInt($("#total_pageno").val())})}else loadBullion=!1}function generatBullionsList(a){var b=a.barcode,c="";null!=b&&""!=b&&"null"!=b||(b="N-A");var d=a.product_name;null!=d&&""!=d&&"null"!=d||(d="");var e=a.bullion_design;null!=e&&""!=e&&"null"!=e||(e="");var f=a.metal;null!=f&&""!=f&&"null"!=f&&"undefined"!=f||(f="");var g=a.type;null!=g&&""!=g&&"null"!=g&&"unfined"!=g&&void 0!=g||(g="");var h="";if(null!==a.metal&&void 0!==a.metal&&(h+=""!==h?"-"+a.metal:a.metal),null!==a.type&&void 0!==a.type&&(h+=""!==h?"-"+a.type:a.type),""!==a.gold_purity&&"null"!==a.gold_purity&&null!==a.gold_purity&&void 0!==a.gold_purity&&"undefined"!==a.gold_purity)if(""!==h){var i=a.gold_purity.split(".");h+="-"+i[0]}else{var i=a.gold_purity.split(".");h+=i[0]}if(null!==a.gold_weight&&void 0!==a.gold_weight&&""!==a.gold_weight)if(""!==h){var j=a.gold_weight.split(".");j=j[0].split(","),h+="-"+j+"-Grams"}else{var j=a.gold_weight.split(".");j=j[0].split(","),h+=j+"-Grams"}var k=a.update_time.split(" "),l="<li>";if(l+='<div class="date fLeft"> ',l+='<span class="upSpan">'+k[0]+"</span>",l+='<span class="lwSpan">'+k[1]+"</span>",l+="</div>",l+='<div class="barcode fLeft">',l+='<span class="upSpan fmOpenB">'+b+"</span>",l+=""!==h?'<span class="lwSpan"><a href="'+DOMAIN+h+"/bid-"+a.id+'" target="_blank">View Details</a></span>':'<span class="lwSpan"><a href="'+DOMAIN+a.metal+"/bid-"+a.id+'" target="_blank">View Details</a></span>',l+="</div>",l+='<div class="weight fLeft">',l+='<span class="upSpan">'+a.type+"</span>",l+='<span class="lwSpan textOverflow" title="'+e+'" >'+e+"</span>",l+="</div>",l+='<div class="metal fLeft">'+a.metal.split("~")[0]+"</div>",l+='<div class="purity fLeft">'+a.gold_purity+"</div>",1e3==a.gold_weight)var m="1 Kgs";else if(a.gold_weight>1e3){a.gold_weight=parseFloat(a.gold_weight);var m=a.gold_weight/1e3;m=common.number_format(m,2)+" Kgs"}else{a.gold_weight=parseFloat(a.gold_weight),a.gold_weight=common.number_format(a.gold_weight,2);var m=a.gold_weight+" Gms"}return l+='<div class="btype fLeft">'+m+"</div>",l+='<div class="price fLeft fmOpenB"><span class="fRight rupeeImg">'+a.price+"</span></div>",l+='<div class="acct fLeft poR">',1!=a.active_flag&&0!=a.active_flag||(c="inStockPrd"),3==a.active_flag&&(c="outStockPrd"),l+='<div class="dmyCnt fRight">',l+='<select id="isStock'+a.id+'" onchange="inStock('+a.id+',this.value);" value='+a.active_flag+' class="txtSelect fmOpenR fLeft '+c+'">',l+='<option value="1" '+(1==a.active_flag?"selected":"")+">In Stock</option>",l+='<option value="3" '+(3==a.active_flag?"selected":"")+">Out Of Stock</option>",l+="</select>",l+='<div class="deltBtn showLeftHelp poR ripplelink fRight" onclick="showConfirmDelete('+a.id+',this)"><span class="tool_tip_left_35">Delete Product</span></div>',l+='<a href="'+DOMAIN+"index.php?case=bullion_Form&catid=10002&prdid="+a.id+'" target="_blank"><div class="editBtn showLeftHelp poR ripplelink fRight"><span class="tool_tip_left_35">Edit Product</span></div></a>',l+='<a href="'+DOMAIN+"upload-image/pid-"+a.id+"&c="+catid+'" target="_blank"><div class="uploadBtn showLeftHelp poR ripplelink fRight"><span class="tool_tip_left_35">Upload Image</span></div></a>',l+="</div>",l+='<div class="tltpBtn">',l+='<div class="tltpbox transition300">',l+='<div class="deltBtn poR fRight ripplelink" onclick="showConfirmDelete('+a.id+',this)"></div>',l+='<a href="'+DOMAIN+"index.php?case=diamond_Form&catid=10000&prdid="+a.id+'" target="_blank"><div class="editBtn fRight poR ripplelink"></div></a>',l+='<a href="'+DOMAIN+"upload-image/pid-"+a.id+"&c="+catid+'" target="_blank"><div class="uploadBtn fRight poR ripplelink"></div></a>',l+='<select id="isStock'+a.id+'" onchange="inStock('+a.id+',this.value);" value='+a.active_flag+' class="txtSelect fmOpenR fLeft '+c+'">',l+='<option value="1" '+(1==a.active_flag?"selected":"")+">In Stock</option>",l+='<option value="3" '+(3==a.active_flag?"selected":"")+">Out Of Stock</option>",l+="</select>",l+="</div>",l+="</div>",l+="</div>",l+="</li>",l+=""}function closeConfirmDelete(){productDelId="",productDelEle="",$("#confirmDelete").velocity({scale:0},{delay:0,ease:"swing"}),$("#overlay").velocity({opacity:0},{delay:100,ease:"swing"}),setTimeout(function(){$("#overlay,#confirmDelete").addClass("dn")},10)}function showConfirmDelete(a,b){productDelId=a,productDelEle=b,$("#overlay,#confirmDelete").removeClass("dn"),setTimeout(function(){$("#overlay").velocity({opacity:1},{delay:0,duration:300,ease:"swing"}),$("#confirmDelete").velocity({scale:1},{delay:80,duration:100,ease:"swing"})},10)}function deleteProduct(){var a=productDelId,b=productDelEle;$.ajax({url:common.APIWebPath()+"index.php?action=vDeletePrd&vid="+uid+"&prdid="+a,success:function(a){$("#overlay").velocity({opacity:0},{delay:100,ease:"swing"}),$("#confirmDelete").velocity({scale:0},{delay:80,duration:100,ease:"swing"}),$("#overlay,#confirmDelete").addClass("dn");var c=jQuery.parseJSON(a);if(0==c.error.Code){$(b).parent().parent().parent().remove(),1e4==catid?catName="Diamonds":10001==catid?catName="Jewells":10002==catid&&(catName="Bullions");var d=$("#total"+catName).text();d--,$("#total"+catName).text(d),0==d&&(loadBullion=!1);var e=$("#"+catName+"List li").length;e<15&&($("#"+catName+"List").html(""),1e4==catid?(diamondPage=1,loadDiamonds()):10001==catid?(jewellPage=1,loadJewels()):10002==catid&&(bullionPage=1,loadBullions())),common.toast(1,c.error.Msg)}else common.toast(0,c.error.Msg)}}),closeConfirmDelete()}function inStock(a,b){var c=(new Date).getTime();$.ajax({url:common.APIWebPath()+"index.php?action=togglePrdstatus&vid="+uid+"&prdid="+a+"&flag="+b+"&timestamp="+c,success:function(c){var d=jQuery.parseJSON(c);if(0==d.error.Code){var e="#isStock"+a;1e4==catid?catName="Diamonds":10001==catid?catName="Jewells":10002==catid&&(catName="Bullions");var f=$("#total"+catName).text();$("#total"+catName).text(f),1==b&&(common.toast(4,"Product is in stock"),$(e).removeClass("soldStockPrd outStockPrd"),$(e).addClass("inStockPrd")),3==b&&(common.toast(2,"Product is out of stock"),$(e).removeClass("inStockPrd soldStockPrd"),$(e).addClass("outStockPrd")),4==b&&(common.toast(3,"Product is sold"),$(e).removeClass("inStockPrd outStockPrd"),$(e).addClass("soldStockPrd"))}else common.toast(0,d.error.Msg)}})}function searchBarcode(a,b){if(b||(b=1),searchVal=a,1e4==catid?searchIDName="Diamonds":10001==catid?searchIDName="Jewells":10002==catid&&(searchIDName="Bullions"),""!=a){var c=(new Date).getTime();$.ajax({url:common.APIWebPath()+"index.php?action=getVProductsByBcode&bcode="+a+"&vid="+uid+"&catid="+catid+"&page="+b+"&limit=50&timestamp="+c,success:function(a){searchBarcodeCallback(a,b)}}),searchScrollValue=a}else $("#"+searchIDName+"List").removeClass("dn"),$("#s"+searchIDName+"List").html("").addClass("dn")}function searchBarcodeCallback(a,b){var c=jQuery.parseJSON(a);if(""!==c.results){var d=c.results.total_products;if($("#"+searchIDName+"List").addClass("dn"),$("#s"+searchIDName+"List").removeClass("dn"),0!=d){searchScroll=!0;var e=c.results.products.length,f=0;if(1e4==catid)for(var h="";f<e;)h+=generateDiamondList(c.results.products[f]),f++;else if(10001==catid)for(var h="";f<e;)h+=generateJewellList(c.results.products[f]),f++;else if(10002==catid)for(var h="";f<e;)h+=generatBullionsList(c.results.products[f]),f++;var i=pagination(c,b);void 0!==h&&null!==h&&""!==h&&($("#s"+searchIDName+"List").html(h),$("#s"+searchIDName+"List").append(i),$(".pgComm").click(function(){$(".pgComm").removeClass("pgActive"),$(this).addClass("pgActive"),searchBarcode(searchVal,$(this).text()),$("#pgno").val($(this).text()),$("html,body").animate({scrollTop:$(".prdResults").offset().top-100},300)}))}else if(1==searchPage){searchScroll=!1;var h='<p class="noRecords"><span>Sorry! No Products Found!</span></p>';$("#s"+searchIDName+"List").html(h)}}else{searchScroll=!1;var h='<p class="noRecords"><span>Sorry! No Products Found!</span></p>';$("#s"+searchIDName+"List").html(h)}}var loadDiamont=!1,loadJewel=!1,loadBullion=!1,diamondPage=1,jewellPage=1,bullionPage=1;/1/.test(busiType)&&($("#dmdTab").removeClass("dn"),loadDiamont=!0),/2/.test(busiType)&&($("#jewTab").removeClass("dn"),loadJewel=!0),/3/.test(busiType)&&($("#bullTab").removeClass("dn"),loadBullion=!0),/1/.test(busiType)&&1e4==catid?($("#diamondPrds").removeClass("dn"),loadDiamonds(1)):/2/.test(busiType)&&10001==catid?(loadJewels(1),$("#jewelleryPrds").removeClass("dn")):/3/.test(busiType)&&10002==catid&&($("#bullionPrds").removeClass("dn"),loadBullions());var catName="",productDelId="",productDelEle="",searchScrollValue="",searchScroll=!1,searchIDName="",searchPage=1,searchVal="";$(".prdSeachTxt").val("");
