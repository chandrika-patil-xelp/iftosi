function bindButton(){$("#upProds").bind("click",function(){$("#overlay,#uploadDiv").removeClass("dn"),setTimeout(function(){$("#overlay").velocity({opacity:1},{delay:0,duration:300,ease:"swing"}),$("#uploadDiv").velocity({scale:1},{delay:80,duration:100,ease:"swing"})},10)})}function loadDiamonds(a){a||(a=1),$.ajax({url:APIDOMAIN+"index.php?action=getVPendingProducts&vid="+uid+"&page="+a+"&limit=50&catid="+catid,success:function(b){loadPDiamondCallback(b,a)}})}function loadPDiamondCallback(a,b){var c=jQuery.parseJSON(a);if(""!=c.results){if(void 0!==c.results&&void 0!==c.results.total_products){var d=c.results.total_products;diamondCount=d}else{var d=c.results.Dcnt;diamondCount=d}$("#totalDiamonds").text(c.results.Dcnt),$("#count_10000").text("("+d+")");var e=c.results.total_pages,f="";if(0!=d){if(b<=e){e==diamondPage&&(loadPDiamont=!1);for(var g=c.results.Dproducts.length,h=0;h<g;)f+=generateDiamondList(c.results.Dproducts[h]),h++;var i=pagination(c,b);diamondPage++,$("#DiamondsPList").html(f),$("#DiamondsPList").append(i)}}else f='<p class="noRecords"><span>Sorry! No Products Found!</span></p>',loadDiamont=!1,$("#DiamondsPList").html(f),$("#DiamondsPList").append(i);$(".pgComm").click(function(){$(".pgComm").removeClass("pgActive"),$(this).addClass("pgActive"),loadDiamonds($(this).text()),$("#pgno").val($(this).text()),$(this).text()>=1&&$(this).text()<=e&&$("html,body").animate({scrollTop:$(".diamondPendingPrds").offset().top-100},300)}),$(".pPrev").bind("click",function(){var a=parseInt($("#pgno").val()),b=a-1;a>1?($("#pgno").val(b),loadDiamonds(b),b>=1&&b<=e&&$("html,body").animate({scrollTop:$("#diamondPendingPrds").offset().top-100},300)):b=1}),$(".pNext").bind("click",function(){var a=parseInt($("#pgno").val()),b=a+1;a<parseInt($("#total_pageno").val())?($("#pgno").val(b),loadDiamonds(b),b>=1&&b<=e&&$("html,body").animate({scrollTop:$("#diamondPendingPrds").offset().top-100},300)):b=parseInt($("#total_pageno").val())})}else loadDiamont=!1}function pagination(a,b){b*=1;var c="",d=a.results.total_products,e=Math.ceil(d/50);$("#total_pageno").val(e);var f=2;if(e>1){if(c+='<div class="fLeft pagination fmOpenR">',c+="<center>",c+='<div class="pPrev poR ripplelink">Previous</div>',e<7+2*f)for(var g=1;g<=e;g++)c+=g==b?'<div class="pgComm poR ripplelink pgActive">'+g+"</div>":'<div class="pgComm poR ripplelink">'+g+"</div>";else if(e>5+2*f)if(b<1+2*f){for(var g=1;g<4+2*f;g++)c+=g==b?'<div class="pgComm poR ripplelink pgActive">'+g+"</div>":'<div class="pgComm poR ripplelink">'+g+"</div>";c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgComm poR ripplelink">'+e+"</div>"}else if(e-2*f>b&&b>2*f){c+='<div class="pgComm poR ripplelink">1</div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>';for(var g=b-f;g<=b+f;g++)c+=g==b?'<div class="pgComm poR ripplelink pgActive">'+g+"</div>":'<div class="pgComm poR ripplelink">'+g+"</div>";c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgComm poR ripplelink">'+e+"</div>"}else{c+='<div class="pgComm poR ripplelink">1</div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>';for(var g=e-(2+2*f);g<=e;g++)if(g==b){c+='<div class="pgComm poR ripplelink pgActive">'+g+"</div>"}else c+='<div class="pgComm poR ripplelink">'+g+"</div>"}c+='<div class="pNext poR ripplelink">Next</div>',c+="</center>",c+="</div>"}return c}function generateDiamondList(a){var b="",c="",d=a.product_name;null!=d&&""!=d&&"null"!=d||(d=a.barcode);var e=a.barcode;"null"!=e&&void 0!=e&&null!=e&&""!=e&&""!=e||(e="N-A");var f=a.b2b_price;f="null"==f||void 0==f||null==f||""==f||""==f||"0.00"==f?"N-A":"&#36;"+f;var g=a.update_time.split(" ");c+="<li>",c+='<div class="date fLeft"> ',c+='<span class="upSpan">'+g[0]+"</span>",c+='<span class="lwSpan">'+g[1]+"</span>",c+="</div>",c+='<div class="barcode fLeft">',c+='<span class="upSpan fmOpenB">'+e+"</span>";var h="";null==a.shape&&void 0===a.shape||(h=a.shape);var i="";return null!==h&&void 0!==h&&(i+=""!==i?"-"+h:h),null!==a.color&&void 0!==a.color&&(i+=""!==i?"-colour-"+a.color:"colour-"+a.color),null!==a.clarity&&void 0!==a.clarity&&(i+=""!==i?"-clarity-"+a.clarity:"clarity-"+a.clarity),null!==a.cert&&void 0!==a.cert&&(i+=""!==i?"-certified-"+a.cert:"certified-"+a.cert),c+=""!==i?'<span class="lwSpan"><a href="'+DOMAIN+i+"/did-"+a.id+'" target="_blank">View Details</a></span>':'<span class="lwSpan"><a href="'+DOMAIN+h+"/did-"+a.id+'" target="_blank">View Details</a></span>',c+="</div>",c+='<div class="shape fLeft">'+a.shape+"</div>",c+='<div class="carats fLeft fmOpenB">'+a.carat+"</div>",c+='<div class="color fLeft">'+a.color+"</div>",c+='<div class="clarity fLeft">'+a.clarity+"</div>",c+='<div class="cert fLeft">'+a.cert+"</div>",c+='<div class="price fLeft fmOpenB"><span class="fRight rueeImg">$'+a.price+"</span></div>",c+='<div class="price fLeft fmOpenB"><span class="fRight rueeImg">'+f+"</span></div>",c+='<div class="acct fLeft poR">',1!=a.active_flag&&0!=a.active_flag||(b="inStockPrd"),3==a.active_flag&&(b="outStockPrd"),4==a.active_flag&&(b="soldStockPrd"),c+='<div class="dmyCnt fRight">',c+='<select id="isStock'+a.id+'" onchange="inStock('+a.id+',this.value);" value='+a.active_flag+' class="txtSelect fmOpenB '+b+' fLeft">',c+="<option "+(1==a.active_flag?"selected":"")+' class="arrow txtCenter" value="1">In Stock</option>',c+="<option "+(3==a.active_flag?"selected":"")+' class="arrow txtCenter" value="3">Out Of Stock</option>',c+="<option "+(4==a.active_flag?"selected":"")+' class="arrow txtCenter" value="4">Sold</option>',c+="</select>",c+='<div class="deltBtn showLeftHelp poR fRight " onclick="showConfirmDelete('+a.id+',this)"><span class="tool_tip_left_35">Delete Product</span></div>',c+='<a href="'+DOMAIN+"index.php?case=diamond_Form&catid=10000&prdid="+a.id+'" target="_blank"><div class="editBtn showLeftHelp fRight poR"><span class="tool_tip_left_35">Edit Product</span></div></a>',c+='<a href="'+DOMAIN+"upload-image/pid-"+a.id+"&c="+catid+'" target="_blank"><div class="uploadBtn showLeftHelp fRight poR"><span class="tool_tip_left_35">Upload Image</span></div></a>',c+="</div>",c+='<div class="tltpBtn">',c+='<div class="tltpbox transition300">',c+='<div class="deltBtn poR fRight ripplelink" onclick="showConfirmDelete('+a.id+',this)"></div>',c+='<a href="'+DOMAIN+"index.php?case=diamond_Form&catid=10000&prdid="+a.id+'" target="_blank"><div class="editBtn fRight poR"></div></a>',c+='<a href="'+DOMAIN+"upload-image/pid-"+a.id+"&c="+catid+'" target="_blank"><div class="uploadBtn fRight poR"></div></a>',c+='<select id="isStock'+a.id+'" onchange="inStock('+a.id+',this.value);" value='+a.active_flag+' class="txtSelect fmOpenB '+b+' fLeft">',c+="<option "+(1==a.active_flag?"selected":"")+' class="arrow txtCenter" value="1">In Stock</option>',c+="<option "+(3==a.active_flag?"selected":"")+' class="arrow txtCenter" value="3">Out Of Stock</option>',c+="<option "+(4==a.active_flag?"selected":"")+' class="arrow txtCenter" value="4">Sold</option>',c+="</select>",c+="</div>",c+="</div>",c+="</div>",c+="</li>"}function loadJewels(a){a||(a=1);var b=(new Date).getTime();$.ajax({url:APIDOMAIN+"index.php?action=getVPendingProducts&vid="+uid+"&page="+a+"&limit=50&catid=10001&timestamp="+b,success:function(b){loadPJewellCallback(b,a)}})}function loadPJewellCallback(a,b){var c=jQuery.parseJSON(a);if(""!=c.results){if(void 0!==c.results&&void 0!==c.results.total_products){var d=c.results.total_products;jewelCount=d}else{var d=c.results.Jcnt;jewelCount=d}$("#totalJewells").text(c.results.Jcnt),$("#count_10001").text("("+d+")");var e=c.results.total_pages,f="";if(0!=d){if(b<=e){e==jewellPage&&(loadPJewel=!1);for(var g=c.results.Jproducts.length,h=0;h<g;)f+=generateJewellList(c.results.Jproducts[h]),h++;var i=pagination(c,b);jewellPage++,$("#JewellsPList").html(f),$("#JewellsPList").append(i)}}else f='<p class="noRecords"><span>Sorry! No Products Found!</span></p>',loadJewel=!1,$("#JewellsPList").html(f),$("#JewellsPList").append(i);$(".pgComm").click(function(){$(".pgComm").removeClass("pgActive"),$(this).addClass("pgActive"),loadJewels($(this).text()),$("#pgno").val($(this).text()),$(this).text()>=1&&$(this).text()<=e&&$("html,body").animate({scrollTop:$("#jewelleryPendingPrds").offset().top-100},300)}),$(".pPrev").bind("click",function(){var a=parseInt($("#pgno").val()),b=a-1;a>1?($("#pgno").val(b),loadJewels(b),b>=1&&b<=e&&$("html,body").animate({scrollTop:$("#jewelleryPendingPrds").offset().top-100},300)):b=1}),$(".pNext").bind("click",function(){var a=parseInt($("#pgno").val()),b=a+1;a<parseInt($("#total_pageno").val())?($("#pgno").val(b),loadJewels(b),b>=1&&b<=e&&$("html,body").animate({scrollTop:$("#jewelleryPendingPrds").offset().top-100},300)):b=parseInt($("#total_pageno").val())})}else loadJewel=!1}function generateJewellList(a){if(void 0!==a&&null!==a&&""!==a){var b="",c=a.product_name,d=a.shape;if(void 0!==a.category&&null!==a.category&&""!==a.category&&"undefined"!=typeof a.category)var e=a.category[0].cat_name,f=e;else var e="";var g=a.metal;if("Bangles/Bracelets"==e){var h=f.split("/");f=h.join("-"),e='<span class="upSpan">Bangles / Bracelets</span>'}if("Men's"==e){var i=f.split("'");f=i.join("-")}var j=a.barcode;void 0!=j&&null!=j&&""!=j&&"null"!=j||(j="N-A"),void 0!=c&&null!=c&&""!=c&&"null"!=c||(c=j),void 0!=d&&null!=d&&""!=d&&"null"!=d||(d="N/A"),void 0!=g&&null!=g&&""!=g&&"null"!=g||(g="N/A");var k="";null!==a.metal&&void 0!==a.metal&&(k+=""!==k?"-"+a.metal:a.metal),null!==f&&void 0!==f&&(k+=""!==k?"-"+encodeURIComponent(f):encodeURIComponent(f)),""!==a.gold_purity&&"null"!==a.gold_purity&&null!==a.gold_purity&&void 0!==a.gold_purity&&"undefined"!==a.gold_purity&&(k+=""!==k?"-"+a.gold_purity+"-Carat":a.gold_purity+"-Carat"),""!==a.gold_weight&&"null"!==a.gold_weight&&null!==a.gold_weight&&void 0!==a.gold_weight&&"undefined"!==a.gold_weight&&(k+=""!==k?"-"+common.number_format(a.gold_weight,0)+"-Grams":common.number_format(a.gold_weight,0)+"-Grams"),null!==a.cert&&void 0!==a.cert&&""!==a.cert&&(k+=""!==k?"-"+a.cert:a.cert);var l="",m=a.update_time.split(" ");if(l+="<li>",l+='<div class="date fLeft"> ',l+='<span class="upSpan">'+m[0]+"</span>",l+='<span class="lwSpan">'+m[1]+"</span>",l+="</div>",l+='<div class="barcode fLeft">',l+='<span class="upSpan fmOpenB">'+j+"</span>",l+=""!==k?'<span class="lwSpan"><a href="'+DOMAIN+k+"/jid-"+a.id+'" target="_blank">View Details</a></span>':'<span class="lwSpan"><a href="'+DOMAIN+a.cert+"/jid-"+a.id+'" target="_blank">View Details</a></span>',l+="</div>",l+='<div class="metal fLeft">'+g.split("~")[0]+"</div>",l+='<div class="catg fLeft">'+d+"</div>",l+='<div class="degno fLeft">'+a.dwt+"</div>",1e3==a.gold_weight)var n="1 Kgs";else if(a.gold_weight>1e3){a.gold_weight=parseFloat(a.gold_weight);var n=a.gold_weight/1e3;n=common.number_format(n,2)+" Kgs"}else{a.gold_weight=parseFloat(a.gold_weight);var n=common.number_format(a.gold_weight,2)+" Gms"}return l+='<div class="price fLeft fmOpenB"><span class="fRight rupeeImg">'+a.price+"</span></div>",l+='<div class="acct fLeft poR">',1!=a.active_flag&&0!=a.active_flag||(b="inStockPrd"),3==a.active_flag&&(b="outStockPrd"),l+='<div class="dmyCnt fRight">',l+='<select id="isStock'+a.id+'" onchange="inStock('+a.id+',this.value);" value='+a.active_flag+' class="txtSelect fmOpenR fLeft '+b+'">',l+='<option value="1" '+(1==a.active_flag?"selected":"")+">In Stock</option>",l+='<option value="3" '+(3==a.active_flag?"selected":"")+">Out Of Stock</option>",l+="</select>",l+='<div class="deltBtn showLeftHelp poR fRight" onclick="showConfirmDelete('+a.id+',this)"><span class="tool_tip_left_35">Delete Product</span></div>',l+='<a href="'+DOMAIN+"index.php?case=jewellery_Form&catid=10001&prdid="+a.id+'" target="_blank"><div class="editBtn showLeftHelp poR fRight"><span class="tool_tip_left_35">Edit Product</span></div></a>',l+='<a href="'+DOMAIN+"upload-image/pid-"+a.id+"&c="+catid+'" target="_blank"><div class="uploadBtn showLeftHelp poR fRight"><span class="tool_tip_left_35">Upload Image</span></div></a>',l+="</div>",l+='<div class="tltpBtn">',l+='<div class="tltpbox transition300">',l+='<div class="deltBtn poR fRight " onclick="showConfirmDelete('+a.id+',this)"></div>',l+='<a href="'+DOMAIN+"index.php?case=diamond_Form&catid=10000&prdid="+a.id+'" target="_blank"><div class="editBtn fRight poR "></div></a>',l+='<a href="'+DOMAIN+"upload-image/pid-"+a.id+"&c="+catid+'" target="_blank"><div class="uploadBtn fRight poR"></div></a>',l+='<select id="isStock'+a.id+'" onchange="inStock('+a.id+',this.value);" value='+a.active_flag+' class="txtSelect fmOpenR fLeft '+b+'">',l+='<option value="1" '+(1==a.active_flag?"selected":"")+">In Stock</option>",l+='<option value="3" '+(3==a.active_flag?"selected":"")+">Out Of Stock</option>",l+="</select>",l+="</div>",l+="</div>",l+="</div>",l+="</li>"}}function loadBullions(a){a||(a=1);var b=(new Date).getTime();$.ajax({url:common.APIWebPath()+"index.php?action=getVPendingProducts&vid="+uid+"&page="+a+"&limit=50&catid=10002&timestamp="+b,success:function(b){loadPBullionsCallback(b,a)}})}function loadPBullionsCallback(a,b){var c=jQuery.parseJSON(a);if(""!=c.results){if(void 0!==c.results&&void 0!==c.results.total_products){var d=c.results.total_products;bullionCount=d}else{var d=c.results.Bcnt;bullionCount=d}$("#totalBullions").text(c.results.Bcnt),$("#count_10002").text("("+d+")");var e=c.results.total_pages,f="";if(0!=d){if(b<=e){e==bullionPage&&(loadPBullion=!1);for(var g=c.results.Bproducts.length,h=0;h<g;)f+=generatBullionsList(c.results.Bproducts[h]),h++;var i=pagination(c,b);bullionPage++,$("#BullionsPList").html(f),$("#BullionsPList").append(i)}}else f='<p class="noRecords"><span>Sorry! No Products Found!</span></p>',loadBullion=!1,$("#BullionsPList").html(f),$("#BullionsPList").append(i);$(".pgComm").click(function(){$(".pgComm").removeClass("pgActive"),$(this).addClass("pgActive"),loadBullions($(this).text()),$("#pgno").val($(this).text()),$(this).text()>=1&&$(this).text()<=e&&$("html,body").animate({scrollTop:$("#bullionPendingPrds").offset().top-100},300)}),$(".pPrev").bind("click",function(){var a=parseInt($("#pgno").val()),b=a-1;a>1?($("#pgno").val(b),loadBullions(b),b>=1&&b<=e&&$("html,body").animate({scrollTop:$("#bullionPendingPrds").offset().top-100},300)):b=1}),$(".pNext").bind("click",function(){var a=parseInt($("#pgno").val()),b=a+1;a<parseInt($("#total_pageno").val())?($("#pgno").val(b),loadBullions(b),b>=1&&b<=e&&$("html,body").animate({scrollTop:$("#bullionPendingPrds").offset().top-100},300)):b=parseInt($("#total_pageno").val())})}else loadBullion=!1}function generatBullionsList(a){var b=a.barcode,c="";null!=b&&""!=b&&"null"!=b||(b="N-A");var d=a.product_name;null!=d&&""!=d&&"null"!=d||(d="");var e=a.bullion_design;null!=e&&""!=e&&"null"!=e||(e="");var f=a.metal;null!=f&&""!=f&&"null"!=f&&"undefined"!=f||(f="");var g=a.type;null!=g&&""!=g&&"null"!=g&&"unfined"!=g&&void 0!=g||(g="");var h="";if(null!==a.metal&&void 0!==a.metal&&(h+=""!==h?"-"+a.metal:a.metal),null!==a.type&&void 0!==a.type&&(h+=""!==h?"-"+a.type:a.type),""!==a.gold_purity&&"null"!==a.gold_purity&&null!==a.gold_purity&&void 0!==a.gold_purity&&"undefined"!==a.gold_purity)if(""!==h){var i=a.gold_purity.split(".");h+="-"+i[0]}else{var i=a.gold_purity.split(".");h+=i[0]}if(null!==a.gold_weight&&void 0!==a.gold_weight&&""!==a.gold_weight)if(""!==h){var j=a.gold_weight.split(".");j=j[0].split(","),h+="-"+j+"-Grams"}else{var j=a.gold_weight.split(".");j=j[0].split(","),h+=j+"-Grams"}var k=a.update_time.split(" "),l="<li>";if(l+='<div class="date fLeft"> ',l+='<span class="upSpan">'+k[0]+"</span>",l+='<span class="lwSpan">'+k[1]+"</span>",l+="</div>",l+='<div class="barcode fLeft">',l+='<span class="upSpan fmOpenB">'+b+"</span>",l+=""!==h?'<span class="lwSpan"><a href="'+DOMAIN+h+"/bid-"+a.id+'" target="_blank">View Details</a></span>':'<span class="lwSpan"><a href="'+DOMAIN+a.metal+"/bid-"+a.id+'" target="_blank">View Details</a></span>',l+="</div>",l+='<div class="weight fLeft">',l+='<span class="upSpan">'+a.type+"</span>",l+='<span class="lwSpan textOverflow" title="'+e+'" >'+e+"</span>",l+="</div>",l+='<div class="metal fLeft">'+a.metal.split("~")[0]+"</div>",l+='<div class="purity fLeft">'+a.gold_purity+"</div>",1e3==a.gold_weight)var m="1 Kgs";else if(a.gold_weight>1e3){a.gold_weight=parseFloat(a.gold_weight);var m=a.gold_weight/1e3;m=common.number_format(m,2)+" Kgs"}else{a.gold_weight=parseFloat(a.gold_weight),a.gold_weight=common.number_format(a.gold_weight,2);var m=a.gold_weight+" Gms"}return l+='<div class="btype fLeft">'+m+"</div>",l+='<div class="price fLeft fmOpenB"><span class="fRight rupeeImg">'+a.price+"</span></div>",l+='<div class="acct fLeft poR">',1!=a.active_flag&&0!=a.active_flag||(c="inStockPrd"),3==a.active_flag&&(c="outStockPrd"),l+='<div class="dmyCnt fRight">',l+='<select id="isStock'+a.id+'" onchange="inStock('+a.id+',this.value);" value='+a.active_flag+' class="txtSelect fmOpenR fLeft '+c+'">',l+='<option value="1" '+(1==a.active_flag?"selected":"")+">In Stock</option>",l+='<option value="3" '+(3==a.active_flag?"selected":"")+">Out Of Stock</option>",l+="</select>",l+='<div class="deltBtn showLeftHelp poR fRight" onclick="showConfirmDelete('+a.id+',this)"><span class="tool_tip_left_35">Delete Product</span></div>',l+='<a href="'+DOMAIN+"index.php?case=bullion_Form&catid=10002&prdid="+a.id+'" target="_blank"><div class="editBtn showLeftHelp poR ripplelink fRight"><span class="tool_tip_left_35">Edit Product</span></div></a>',l+='<a href="'+DOMAIN+"upload-image/pid-"+a.id+"&c="+catid+'" target="_blank"><div class="uploadBtn showLeftHelp poR fRight"><span class="tool_tip_left_35">Upload Image</span></div></a>',l+="</div>",l+='<div class="tltpBtn">',l+='<div class="tltpbox transition300">',l+='<div class="deltBtn poR fRight" onclick="showConfirmDelete('+a.id+',this)"></div>',l+='<a href="'+DOMAIN+"index.php?case=diamond_Form&catid=10000&prdid="+a.id+'" target="_blank"><div class="editBtn fRight poR ripplelink"></div></a>',l+='<a href="'+DOMAIN+"upload-image/pid-"+a.id+"&c="+catid+'" target="_blank"><div class="uploadBtn fRight poR"></div></a>',l+='<select id="isStock'+a.id+'" onchange="inStock('+a.id+',this.value);" value='+a.active_flag+' class="txtSelect fmOpenR fLeft '+c+'">',l+='<option value="1" '+(1==a.active_flag?"selected":"")+">In Stock</option>",l+='<option value="3" '+(3==a.active_flag?"selected":"")+">Out Of Stock</option>",l+="</select>",l+="</div>",l+="</div>",l+="</div>",l+="</li>"}function closeConfirmDelete(){productDelId="",productDelEle="",$("#confirmDelete").velocity({scale:0},{delay:0,ease:"swing"}),$("#overlay").velocity({opacity:0},{delay:100,ease:"swing"}),setTimeout(function(){$("#overlay,#confirmDelete").addClass("dn")},10)}function showConfirmDelete(a,b){productDelId=a,productDelEle=b,$("#overlay,#confirmDelete").removeClass("dn"),setTimeout(function(){$("#overlay").velocity({opacity:1},{delay:0,duration:300,ease:"swing"}),$("#confirmDelete").velocity({scale:1},{delay:80,duration:100,ease:"swing"})},10)}function deleteProduct(){var a=productDelId,b=productDelEle;catAct=$(".wishTabComm").closest(".sel").attr("id"),$.ajax({url:common.APIWebPath()+"index.php?action=vDeletePrd&vid="+uid+"&prdid="+a,success:function(a){$("#overlay").velocity({opacity:0},{delay:100,ease:"swing"}),$("#confirmDelete").velocity({scale:0},{delay:80,duration:100,ease:"swing"}),$("#overlay,#confirmDelete").addClass("dn");var c=jQuery.parseJSON(a);if(0==c.error.Code){$(b).parent().parent().parent().remove(),"10000"==catAct?catName="Diamonds":"10001"==catAct?catName="Jewells":"10002"==catAct&&(catName="Bullions");var d=$("#total"+catName).text();d--,$("#total"+catName).text(d),0==d&&(loadBullion=!1);var e=$("#"+catName+"List li").length;e<15&&($("#"+catName+"List").html(""),"10000"==catAct?(diamondPage=1,loadDiamonds()):"10001"==catAct?(jewellPage=1,loadJewels()):"10002"==catAct&&(bullionPage=1,loadBullions())),common.toast(1,c.error.Msg)}else common.toast(0,c.error.Msg)}})}function inStock(a,b){var c=(new Date).getTime();$.ajax({url:common.APIWebPath()+"index.php?action=togglePrdstatus&vid="+uid+"&prdid="+a+"&flag="+b+"&timestamp="+c,success:function(c){var d=jQuery.parseJSON(c);if(0==d.error.Code){var e="#isStock"+a;1e4==catid?catName="Diamonds":10001==catid?catName="Jewells":10002==catid&&(catName="Bullions");var f=$("#total"+catName).text();$("#total"+catName).text(f),1==b&&(common.toast(4,"Product is in stock"),$(e).removeClass("soldStockPrd outStockPrd"),$(e).addClass("inStockPrd")),3==b&&(common.toast(2,"Product is out of stock"),$(e).removeClass("inStockPrd soldStockPrd"),$(e).addClass("outStockPrd")),4==b&&(common.toast(3,"Product is sold"),$(e).removeClass("inStockPrd outStockPrd"),$(e).addClass("soldStockPrd"))}else common.toast(0,d.error.Msg)}})}function searchBarcode(a,b){var c="10000",d=0,e="Diamonds";$("#totalDiamonds").text(),$("#totalJewells").text(),$("#totalBullions").text();if($(".wishTabComm").each(function(){$(this).hasClass("sel")&&(c=$(this).attr("id"))}),b||(b=1),searchVal=a,1e4==c?(searchIDName="DiamondsPList",e="Diamonds",d=$("#totalDiamonds").text()):10001==c?(searchIDName="JewellsPList",e="Jewells",d=$("#totalJewells").text()):10002==c&&(searchIDName="BullionsPList",e="Bullions",d=$("#totalBullions").text()),""!=a){var i=(new Date).getTime();$.ajax({url:common.APIWebPath()+"index.php?action=getVPendingSearch&bcode="+a+"&vid="+uid+"&catid="+c+"&page="+b+"&limit=50&timestamp="+i,success:function(a){searchBarcodeCallback(a,b)}}),searchScrollValue=a}else"10000"==c?$("#total"+e).text(diamondCount):"10001"==c?$("#total"+e).text(jewelCount):"10002"==c&&$("#total"+e).text(bullionCount),$("#"+searchIDName).removeClass("dn"),$("#s"+searchIDName).html("").addClass("dn")}function searchBarcodeCallback(a,b){var c=jQuery.parseJSON(a),d="10000";if($(".wishTabComm").each(function(){$(this).hasClass("sel")&&(d=$(this).attr("id"))}),""!==c.results){var e=c.results.total_products;if($("#"+searchIDName).addClass("dn"),$("#s"+searchIDName).removeClass("dn"),0!=e){searchScroll=!0;var f=c.results.products.length,g=0;if(1e4==d)for(var i="";g<f;)$("#totalDiamonds").text(e),i+=generateDiamondList(c.results.products[g]),g++;else if(10001==d)for(var i="";g<f;)$("#totalJewells").text(e),i+=generateJewellList(c.results.products[g]),g++;else if(10002==d)for(var i="";g<f;)$("#totalBullions").text(e),i+=generatBullionsList(c.results.products[g]),g++;var j=pagination(c,b);void 0!==i&&null!==i&&""!==i&&($("#s"+searchIDName).html(i),$("#s"+searchIDName).append(j),$(".pgComm").click(function(){$(".pgComm").removeClass("pgActive"),$(this).addClass("pgActive"),searchBarcode(searchVal,$(this).text()),$("#pgno").val($(this).text()),$("html,body").animate({scrollTop:$(".prdResults").offset().top-100},300)}))}else if(1==searchPage){"10000"==d?$("#totalDiamonds").text(e):"10001"==d?$("#totalJewells").text(e):"10002"==d&&$("#totalBullions").text(e),searchScroll=!1;var i='<p class="noRecords"><span>Sorry! No Products Found!</span></p>';$("#s"+searchIDName).html(i)}}else{searchScroll=!1;var i='<p class="noRecords"><span>Sorry! No Products Found!</span></p>';$("#s"+searchIDName).html(i)}}var loadPDiamont=!1,loadPJewel=!1,loadPBullion=!1,diamondPage=1,jewellPage=1,bullionPage=1,diamondCount=0,jewelCount=0,bullionCount=0,catAct;$(document).ready(function(){$("#upDolRt").addClass("dn"),$(".addPrdBtn").addClass("dn"),loadDiamonds(1),loadBullions(1),loadJewels(1),$(".wishTabComm").bind("click",function(){$(".wishTabComm").removeClass("sel"),10002==$(this).attr("id")&&($(this).addClass("sel"),$("#diamondPendingPrds,#jewelleryPendingPrds").addClass("dn"),$("#bullionPendingPrds").removeClass("dn"),bindButton()),1e4==$(this).attr("id")&&($(this).addClass("sel"),$("#bullionPendingPrds,#jewelleryPendingPrds").addClass("dn"),$("#diamondPendingPrds").removeClass("dn"),bindButton()),10001==$(this).attr("id")&&($(this).addClass("sel"),$("#bullionPendingPrds,#diamondPendingPrds").addClass("dn"),$("#jewelleryPendingPrds").removeClass("dn"),bindButton())})});var catName="",productDelId="",productDelEle="",searchScrollValue="",searchScroll=!1,searchIDName="",searchPage=1,searchVal="";$(".prdSeachTxt").val("");
