function fnValidatePAN(){$conv("#pan").val()}function validateForm(){var a=$("#orgname").val().trim(),b=$("#fulladd").val().trim(),c=$("#pincode").val(),d=$("#area").val().trim(),e=$("#city").val().trim(),f=$("#state").val().trim(),g=$("#wbst").val().trim(),h=$("#pan").val().trim(),i=$("#vat").val().trim(),j="V02554544",k=/^(C|V|c|v){1}([0-3]){2}([0-9]){2}/g,m=(j.match(k),/^([A-Z]|[a-z]){5}([0-9]){4}([A-Z]|[a-z]){1}?$/),n=/([C,c,P,p,H,h,F,f,A,a,T,t,B,b,L,l,J,j,G,g,K,k])/,o=h.substring(3,4),j="",p=!0;if(""==a&&(j="Organization Name is Required\n",$("#orgname").focus(),p=!1),p&&""==j&&""==b&&(j="Address is Required",$("#fulladd").focus(),p=!1),p&&""==j&&(""==c||c.length<6||isNaN(c))&&(j="Pincode is Required",$("#pincode").focus(),p=!1),p&&""==j&&""==d&&(j="Area is Required",$("#area").focus(),p=!1),p&&""==j&&""==e&&(j="City is Required",$("#city").focus(),p=!1),p&&""==j&&""==f&&(j="State is Required",$("#state").focus(),p=!1),p&&""!==i)if(p&&12==i.length){var q=/^([0-9]){11}(C|V|c|v){1}/g;0==q.test(i)&&(j="Invaild VAT No.",$("#vat").focus(),p=!1)}else p&&(j="Invaild VAT Number",$("#vat").focus(),p=!1);else!p||void 0!=i&&null!=i&&""!=i||(j="VAT Number Required",$("#vat").focus(),p=!1);return p&&""==j&&""===h&&(j="Pancard is mandatory",$("#pan").focus(),p=!1),p&&""==j&&null==h.match(m)&&(j="Invalid PAN card number",$("#pan").focus(),p=!1),p&&""==j&&h.search(m)==-1&&(j="Invalid PAN card number",$("#pan").focus(),p=!1),p&&""==j&&0==n.test(o)&&(j="Invalid PAN card number",$("#pan").focus(),p=!1),!p||""!=j||$("#forDiamond").hasClass("comSelected")||$("#forJewellery").hasClass("comSelected")||$("#forBullion").hasClass("comSelected")||(j="Select business type",p=!1),p&&""==j&&""!==g&&(common.validateUrl("wbst")||(j="Please enter proper website url",p=!1)),0!=p||""===j||(common.toast(0,j),!1)}function find_duplicates(a){for(var b=a.length,c=[],d={},e=0;e<b;e++){var f=a[e];d[f]=d[f]>=1?d[f]+1:1}for(var f in d)d[f]>1&&c.push(f);return c}function validateStep2Form(){if(/1/.test(busiType)){var b=$("#memcert").val().trim();$("#ofcity").val().trim(),$("#ofcountry").val().trim();if(""==b)return $("#memcert").focus(),common.toast(0,"Enter GJEPC Membership Certificate"),!1}if(/2/.test(busiType)){var e=$("#showroomname").val().trim(),g=($("#showroomno").val().trim(),$("#mdbw").val().trim());if(void 0==e||"undefined"==e||null==e||"null"==e||""==e)return $("#showroomname").focus(),common.toast(0,"Show Room Name is Required"),!1;if(""==g)return common.toast(0,"Membership Of Council / Jewellers Association is Required"),$("#mdbw").focus(),!1}if(/3/.test(busiType)){var h=$("#bul_mdbw").val().trim();if(""==h)return common.toast(0,"Membership Of Council / Jewellers Association is Required"),$("#bul_mdbw").focus(),!1}return!!(/1/.test(busiType)||/2/.test(busiType)||/3/.test(busiType))||(common.toast(0,"Select business type"),!1)}function validateStep3Form(){var a=$("#cperson").val().trim(),b=$("#position").val().trim(),c=$("#conMobile").val().trim();$("#email").val().trim(),$("#landline").val().trim();if(""==a)return common.toast(0,"Contact Person Name is Required"),$("#cperson").focus(),!1;if(""==b)return common.toast(0,"Position is Required"),$("#position").focus(),!1;if(!common.checkMobile("conMobile"))return $("#conMobile").focus(),!1;var g=$("#altmbNo1_Mobile").val(),h=$("#altmbNo2_Mobile").val();if(""!=g||""!=h){if(c==g)return $("#altmbNo1_Mobile").val("").focus(),common.toast(0,"Please enter unique mobile number."),!1;if(g==h)return $("#altmbNo1_Mobile").val("").focus(),common.toast(0,"Please enter unique mobile number."),!1;if(c==h)return $("#altmbNo2_Mobile").val("").focus(),common.toast(0,"Please enter unique mobile number."),!1}var i=new Array,j=!0;return $(".txtCCode").each(function(){var a=$(this).val()+""+$(this).siblings(".lnNo").val();""!=a&&(i.indexOf(a)!=-1&&(j=!1),i.push(a))}),j?common.validateEmail("email")?!!common.checkLandline("lnCode","landline"):(common.toast(0,"Contact Email is Required"),$("#email").focus(),!1):(common.toast(0,"Please enter unique Landline number."),!1)}function clickThis(a,b){var c=document.getElementById(a);if("step1"==a)changeTab("step1");else if("step2"==a&&validateForm())1==submiter?(submiter=!1,submitForm(c),$("html,body").animate({scrollTop:0},"slow")):common.toast(0,"Please wait Submit is in process!");else if("step3"==a)if(void 0!==b&&null!==b&&""!==b)validateForm()&&(1==submiter?(submiter=!1,submitForm(),setTimeout(function(){var a=validateStep2Form();a&&(submitStep2Form(c),$("html,body").animate({scrollTop:0},"slow"))},800),submiter=!0):common.toast(0,"Please wait Submit is in process!"));else{var d=validateStep2Form();d&&(1==submiter?(submiter=!1,submitStep2Form(c),$("html,body").animate({scrollTop:0},"slow"),submiter=!0):common.toast(0,"Please wait Submit is in process!"))}else"step4"==a&&validateStep3Form()&&(1==submiter?(submiter=!1,submitStep3Form(c),submiter=!0):common.toast(0,"Please wait Submit is in process!"))}function submitForm(){var a=customStorage.readFromStorage("isComp");"2"!==a&&2!==a&&customStorage.removeFromStorage("isComp");var b=new Array("orgname","fulladd","add1","pincode","area","city","state","vat","pan","tovr","wbst"),c=new Object,d=formatData(b),e=$("#payammo").val(),f=new Array;$("#forDiamond").hasClass("comSelected")&&f.push(1),$("#forJewellery").hasClass("comSelected")&&f.push(2),$("#forJewellery").hasClass("comSelected")&&f.push(3),e=e.trim(),busiType=f.join(","),d.busiType=busiType,d.country=country,d.lng=lng,d.lat=lat,d.uid=uid,c.result=d;var g=d.area,h=d.city,i=d.state,j=d.fulladd,k=d.pincode,l=(new Date).getTime();$.ajax({url:common.APIWebPath()+"index.php?action=checkArea&fulladd="+encodeURIComponent(j)+"&area="+encodeURIComponent(g)+"&state="+encodeURIComponent(i)+"&city="+encodeURIComponent(h)+"&pincode="+encodeURIComponent(k)+"&timestamp="+l,success:function(a){var b=jQuery.parseJSON(a),f=b.results;"Success"==f.status?(c=JSON.stringify(c),$.ajax({url:common.APIWebPath()+"index.php?action=udtProfile&payamt="+e+"&lat="+f.lat+"&lng="+f.lng+"&dt="+encodeURIComponent(c)+"&timestamp="+l,success:function(a){var b=jQuery.parseJSON(a);customStorage.addToStorage("busiType",busiType);var c=b.error.code,e=b.error.msg;0==c?($("#showroomname").val(d.orgname),changeTab("step2")):common.toast(0,e)}}),submiter=!0):common.toast(0,"Please mention the correct area location")}})}function submitStep2Form(){var a=new Object,b=new Object,c="";if(/1/.test(busiType)){var d=new Array("memcert","bdbc","othdbaw","ofcity","ofcountry");a=formatData(d)}/2/.test(busiType)&&(a.showroomname=$("#showroomname").val(),a.showroomno=$("#showroomno").val(),c=$("#mdbw").val()),/3/.test(busiType)&&(c+="~"+$("#bul_mdbw").val()),""!=c&&(c=c.replace(/~*$/,""),a.mdbw=c),a.uid=uid,b.result=a,b=JSON.stringify(b);var e=customStorage.readFromStorage("isComp");"2"!==e&&2!==e?customStorage.addToStorage("isComp",1):customStorage.addToStorage("isComp",2);var f=(new Date).getTime();$.ajax({url:common.APIWebPath()+"index.php?action=udtProfile&isC=1&dt="+encodeURIComponent(b)+"&timestamp="+f,success:function(a){var b=jQuery.parseJSON(a),c=b.error.code,d=b.error.msg;0==c?changeTab("step3"):common.toast(0,d)}}),submiter=!0}function submitStep3Form(){var val=new Array("cperson","position","email"),data=new Object,res=formatData(val),conMobile=$("#conMobile").val();""!=altmbNo1_Mobile&&(res.cmobile=conMobile);var altmbNo1_Mobile=$("#altmbNo1_Mobile").val();""!=altmbNo1_Mobile&&(res.alt_cmobile=altmbNo1_Mobile);var altmbNo2_Mobile=$("#altmbNo2_Mobile").val();""!=altmbNo2_Mobile&&(res.alt_cmobile+="|~|"+altmbNo2_Mobile),res.landline=common.getLandlineNo(),res.uid=uid,data.result=res,data=JSON.stringify(data);var tmstmp=(new Date).getTime();$.ajax({url:common.APIWebPath()+"index.php?action=udtProfile&isC=2&dt="+encodeURIComponent(data)+"&timestamp="+tmstmp,success:function(result){var obj=jQuery.parseJSON(result),errCode=obj.error.code,errMsg=obj.error.msg;if(0==errCode){common.toast(1,errMsg);var isComp=2;customStorage.addToStorage("isComp",isComp);var bsType=parseInt(busiType.charAt(0));bsType-=1;var tmstmp=(new Date).getTime();$.ajax({url:common.APIWebPath()+"index.php?action=viewAll&uid="+res.uid+"&timestamp="+tmstmp,success:function(result){var obj=jQuery.parseJSON(result),isactive=obj.results[1].active_flag;if(1==isactive||"1"==isactive)setTimeout(function(){window.location.href="index.php?case=vendor_landing&catid=1000"+bsType},800);else if(0==isactive||"0"==isactive){var pr_name=customStorage.readFromStorage("username"),pr_mobile=customStorage.readFromStorage("mobile"),pr_email=customStorage.readFromStorage("email"),isVendor=customStorage.readFromStorage("is_vendor"),uid=customStorage.readFromStorage("userid");$.ajax({url:DOMAIN+"apis/index.php?action=sendWelcomeMailSMS&username="+pr_name+"&mobile="+pr_mobile+"&email="+pr_email+"&isVendor="+isVendor,success:function(result){var obj=eval("("+result+")"),errCode=obj.error.code;0==errCode&&(customStorage.toast(1,"Registration Successfully Done"),setTimeout(function(){window.location.href="index.php?case=inactive_vendor&uid="+uid},2500))}})}}})}else common.toast(0,errMsg)}}),submiter=!0}function formatData(a){for(var b=new Object,c=0;c<a.length;c++)b[a[c]]=$("#"+a[c]).val();var d="";return $(".indNm").each(function(){d+=$(this).text()+","}),b.banker=d,b}function changeTab(a){var b=document.getElementById(a);common.changeTab(b)}function loadAreaList(){var a=$("#pincode").val(),b=$("#city").val();6==a.length&&$.ajax({url:common.APIWebPath()+"index.php?action=viewbyPincode&city="+b+"&code="+a,success:function(a){var b=jQuery.parseJSON(a),c=b.results,d=b.error.code;null!==c&&""!==c&&null!==c[0].city&&void 0!==c[0].city&&null!==c[0].area&&void 0!==c[0].area&&null!==c[0].state&&void 0!==c[0].state?(areaList=c,$("#area").val(c[0].area),$("#city").val(c[0].city),$("#state").val(c[0].state),country=c[0].country,lat=c[0].latitude,lng=c[0].longitude):null==c&&1==d&&common.toast(0,"There is no as such Pincode in the city you have mentioned")}})}function arrangeData(a,b,c,d){if(a.results){var e="<ul class='smallField fmRoboto font14 pointer border1 transition300' style='overflow-y:auto;'>";return $.each(a.results,function(a,c){"#area"==b&&null!==c.n&&void 0!==c.n&&"undefined"!==c.n&&"null"!==c.n&&""!==c.n&&(e+="<li id='suggest"+a+"' class='autoSuggestRow transition300 txtCaCase txtOver' onclick='setAreaSuggestValue(\""+c.n+'","'+c.city+'","'+c.state+'","'+c.pincode+'","area");\'>&nbsp;&nbsp;'+c.n+"</li>"),"#city"==b&&(e+="<li id='suggest"+a+"' class='autoSuggestRow w100 transition300 txtCaCase' onclick='setCitySuggestValue(\""+c.n+'","city");\'>&nbsp;&nbsp;'+c.n+"</li>"),"#state"==b&&(e+="<li id='suggest"+a+"' class='autoSuggestRow w100 transition300 txtCaCase' onclick='setStateSuggestValue(\""+c.n+'","state")\'>&nbsp;&nbsp;'+c.n+"</li>")}),e+="</ul>"}return""}function setAreaSuggestValue(a,b,c,d,e){void 0!==a&&"undefined"!==a&&null!==a&&"null"!==a&&$("#"+e).val(a.trim()),void 0!==b&&"undefined"!==b&&null!==b&&"null"!==b&&$("#city").val(b.trim()),void 0!==c&&"undefined"!==c&&null!==c&&"null"!==c&&$("#state").val(c.trim()),void 0!==d&&"undefined"!==d&&null!==d&&"null"!==d&&$("#pincode").val(d.trim()),setTimeout(function(){$("#areaSuggestDiv").addClass("dn")},50)}function setCitySuggestValue(a,b){$("#"+b).val(a),setTimeout(function(){$("#citySuggestDiv").addClass("dn")},50)}function setStateSuggestValue(a,b){$("#"+b).val(a),setTimeout(function(){$("#stateSuggestDiv").addClass("dn")},50)}function onlyAlphabets(a,b){var c=a.which?a.which:a.keyCode;return c<47||c>31&&(c<48||c>57)}function addAttrValues(a){var b=$(a).val().trim(" "),c=b.trim(","),d=c.split(" ").join("_"),e="acc_name_"+d;if(tagArray.indexOf(e)==-1&&0!=c.length){var f="<div id='"+e+"' class='tagcloud indNm txtOver fLeft'>"+c+"</div>";$("#bankNames").append(f),tagArray.push(e),nameArray.push(e.replace("acc_name_","")),$("#allBankNames").val(nameArray),bindTags(),setTimeout(function(){$(a).val("")},100)}else setTimeout(function(){$(a).val("")},100)}function bindTags(){$(".tagcloud").click(function(){var a=$(this).attr("id");console.log(a);var b=this;setTimeout(function(){$(b).remove();var c=a;tagArray=jQuery.grep(tagArray,function(a){return a!==c})},100)})}var input_selector="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea, input[type=radio]",uid=customStorage.readFromStorage("userid"),submiter=!0,tagArray=new Array,nameArray=new Array;vid===uid&&""!=uid||window.location.assign(DOMAIN),$(document).ready(function(){var pay=parseInt($("#payammo").val());$("#payingamt").html("&#8377 "+pay),$("#payammo2").html("&#8377 "+pay),""==$("#cperson").val()&&$("#cperson").val(customStorage.readFromStorage("username")),""==$("#conMobile").val()&&$("#conMobile").val(customStorage.readFromStorage("mobile"));var tmstmp=(new Date).getTime();$.ajax({url:APIDOMAIN+"index.php?action=statusChecker&uid="+uid+"&timestamp"+tmstmp,success:function(result){var obj=eval("("+result+")"),errCode=obj.error.code;if("0"==errCode){var af=obj.result;void 0!==af&&"undefined"!==af&&null!==af&&"null"!==af&&""!==af&&("no"==af?$(".compComm").click(function(a){var b=document.all?event.x:a.pageX,c=document.all?event.y:a.pageY;setTimeout(function(){b=a.pageX=a.pageX+100,c=a.pageY=a.pageY+100},1e3);var d=$(this).attr("id");$(this).toggleClass("comSelected"),"forDiamond"==d?$("#diamondDet").toggleClass("dn"):"forJewellery"==d&&($("#jewelleryDet").toggleClass("dn"),$("#bullionDet").toggleClass("dn"));var e=0;$(".compComm").each(function(){var a=$(this).attr("id");$(this).hasClass("comSelected")&&("forDiamond"==a?e+=3e4:"forJewellery"==a&&(e+=25e3))}),pay=e,$("#payingamt").html("&#8377 "+pay),$("#payammo2").html("&#8377 "+pay),$("#payammo").val(pay)}):"yes"==af&&$(".compComm").bind("click",function(){common.toast(0,"You are not allowed to change your plan once your profile is activated")}))}1==errCode&&common.toast(0,"You are not allowed to access this page")}}),$("#pan").bind("keyup",function(){void 0!==$(this)&&"undefined"!=typeof $(this)&&void 0!==$(this).val()&&"undefined"!=typeof $(this).val()&&$(this).val($(this).val().toUpperCase())})}),$("#pincode").keyup(function(){var a=$("#pincode").val();a||($("#area").val(""),$("#city").val(""),$("#state").val(""))}),$("#area").keyup(function(){var a=$("#area").val();a||($("#pincode").val(""),$("#city").val(""),$("#state").val(""))}),$("#area").focus(function(){$("#citySuggestDiv").addClass("dn"),$("#stateSuggestDiv").addClass("dn")}),$("#city").focus(function(){$("#areaSuggestDiv").addClass("dn"),$("#stateSuggestDiv").addClass("dn")}),$("#state").focus(function(){$("#areaSuggestDiv").addClass("dn"),$("#citySuggestDiv").addClass("dn"),$("#stateSuggestDiv").addClass("dn")}),$("#state").focusout(function(){$("#areaSuggestDiv").addClass("dn"),$("#citySuggestDiv").addClass("dn"),$("#stateSuggestDiv").addClass("dn")});var country="",lng="",lat="";loadAreaList(),$("#pincode").keyup(function(){loadAreaList()});var pincode1;$(document).ready(function(){pincode1=$("#pincode").val(),$("#pincode").bind("keyup keydown",function(a){"undefined"!=pincode1&&null!=pincode1&&void 0!=pincode1&&"null"!=pincode1||(pincode1="")});var a="";$("#area").bind("keyup focus",function(b){if("area"==$(this).attr("id")){pincode1=$("#pincode").val(),a="areaSuggestDiv";var c="";c=0==pincode1.length?"action=areaSuggest&area="+escape($(this).val()):"action=areaSuggest&pincode="+pincode1+"&area="+escape($(this).val()),""!==$(this).val()?new Autosuggest($(this).val(),"#area","#areaSuggestDiv",DOMAIN+"apis/index.php",c,!0,"","",b):$("#areaSuggestDiv").addClass("dn")}}),$("#city").bind("keyup focus",function(b){if("city"==$(this).attr("id")){a="citySuggestDiv";var c="action=citySuggest&name="+escape($(this).val());""!==$(this).val()?new Autosuggest($(this).val(),"#city","#citySuggestDiv",DOMAIN+"apis/index.php",c,!0,"","",b):$("#citySuggestDiv").addClass("dn")}}),$("#state").bind("keyup focus",function(b){if("state"==$(this).attr("id")){a="stateSuggestDiv";var c="action=stateSuggest&name="+escape($(this).val());""!==$(this).val()?new Autosuggest($(this).val(),"#state","#stateSuggestDiv",DOMAIN+"apis/index.php",c,!0,"","",b):$("#stateSuggestDiv").addClass("dn")}}),$("body").bind("click",function(){$("#"+a).addClass("dn")})});
