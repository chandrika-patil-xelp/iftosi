function Common(){function isValidMKey(a,b){var c=$("#"+b).val(),d=c.length,e=/^[7-9]/g,c=c.match(e);null==c&&$("#"+b).val(""),10==d&&$("#tf_email").focus()}function changeHIdVal(a){}var _this=this;this.validateEmail=function(a){var b=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return a.match(b)?0:1},this.isNumberKey=function(a){var b=a.which?a.which:a.keyCode;return!(b>31&&(b<48||b>57))&&13!=b},this.validateEmail=function(a){var b=$("#"+a).val(),c=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return c.test(b)},this.checkMobile=function(a){var b=$("#"+a).val(),c=b.length;return"9"==b.charAt(0)&&10==c||"8"==b.charAt(0)&&10==c||"7"==b.charAt(0)&&10==c||(this.toast(0,"Please Enter Correct Mobile Number."),!1)},this.checkLogin=function(){var a=customStorage.readFromStorage("isLoggedIn"),c=(customStorage.readFromStorage("tf_mobile"),customStorage.readFromStorage("userid")),d=customStorage.readFromStorage("username"),e=customStorage.readFromStorage("is_vendor"),f=customStorage.readFromStorage("busiType"),g=customStorage.readFromStorage("isComp");if(""==e||e!=-1&&"-1"!=e||(e=0),1==e&&null!=f&&void 0!=f)switch(f=f.charAt(0)){case"1":var h=1e4;break;case"2":var h=10001;break;case"3":var h=10002}var i="";if("true"===a){if(void 0===d&&"undefined"===d&&null===d&&"null"===d&&""===d||$(".signInUpTab").html("Hello "+d.split(" ")[0]).addClass("loggedIn"),$("#userMenu").removeClass("dn"),0==e)$("#wishListCnt").removeClass("dn"),$("#usrNm").html(d.split(" ")[0]),$("#wshlstPg").removeClass("dn"),$("#lgotPg").removeClass("dn"),$("#usrNm").removeClass("dn");else if(2==e)i+='<a href="'+DOMAIN+"index.php?case=vendorList&uid="+c+'"><li id="vendorlist" class="transition100">Vendor List</li></a>',i+='<a href="'+DOMAIN+"index.php?case=product_list&uid="+c+'"><li id="productstab" class="transition100">Product Images</li></a>',i+='<a href="'+DOMAIN+"index.php?case=customerDtls&uid="+c+'"><li id="customerList" class="transition100">Customer List</li></a>',$("#wishListHdr").addClass("dn"),$("#usrNm").html(d.split(" ")[0]),$("#wshlstPg").addClass("dn"),$("#lgotPg").addClass("dn"),$("#usrNm").addClass("dn");else{if($("#wishListCnt").removeClass("dn"),"2"===g){var j=(new Date).getTime();$.ajax({url:DOMAIN+"apis/index.php?action=viewAll&uid="+c+"&timestamp="+j,success:function(a){var b=jQuery.parseJSON(a),d=b.results[1].active_flag;if(1==d||"1"==d){var e=customStorage.readFromStorage("busiType").charAt(0);h=parseInt(e)-1,i+='<li class="transition100" onclick="window.location.assign(\''+DOMAIN+"index.php?case=vendor_landing&catid=1000"+h+"');\">Products</li>",i+='<li class="transition100" onclick="window.location.assign(\''+DOMAIN+"index.php?case=vendor_enquiries');\">Enquiry</li>",i+='<li id="profileHeader1" class="transition100" onclick="return showVendorProfile();">Profile</li>'}else 0==d&&(i+='<li class="transition100" onclick="window.location.assign(\''+DOMAIN+"index.php?case=vendor_Form&uid="+c+"');\">Profile</li>")}})}else i+='<li class="transition100" onclick="window.location.assign(\''+DOMAIN+"index.php?case=vendor_Form&uid="+c+"');\">Profile</li>";$("#usrNm").html(d.split(" ")[0]),$("#lgotPg").removeClass("dn"),$("#usrNm").removeClass("dn")}setTimeout(function(){$("#lgnPg").addClass("dn"),$(".isignup").addClass("dn"),i+='<li class="transition100" onclick="common.doLogout();">Log Out</li>',$("#hdropList").html(i),_this.getWishListCount()},1200)}else $("#wishListCnt").addClass("dn"),$("#lgnPg").removeClass("dn"),$("#wshlstPg").removeClass("dn")},$(document).click(function(a){$("#hdropList").is(":visible")&&(hisOpen=!1,$("#hdropList").hide())}),this.doLogout=function(){customStorage.removeAll(),void 0!==pageName&&null!==pageName&&""!==pageName&&"undefined"!=typeof pageName?window.location.href=DOMAIN:window.location.href=DOMAIN,$("#wishListHdr").removeClass("dn")},this.closeLoginForm=function(){$("#baseCont").removeClass("pFixed"),$("#loginDiv").velocity({opacity:0},{delay:0,duration:100,ease:"swing"}),$("#overlay1").velocity({opacity:0},{delay:300,duration:300,ease:"swing"}),setTimeout(function(){$("#overlay1,#loginDiv").addClass("dn"),$("#loginDiv,#overlay1").removeClass("dn")},1010);var a=window.location;window.location=a},this.showLoginForm=function(a){var b='<div id="overlay1" class="overlay transition300" style="opacity: 0;"></div>';b+='<div id="loginDiv" class="loginDiv transition300" style="opacity:0">',b+='<div class="lgTitle fLeft fmOpenR">Sign In</div>',b+='<div class="inputCont fLeft fmOpenR">',b+='<input type="tel" id="pr_mobile" name="pr_mobile" autocomplete="off" class="txtInput cOrange fmOpenR font14 mobileIcon" readonly>',b+='<label for="pr_mobile" class="inp-label transition100">MOBILE OR EMAIL</label>',b+='<div id="pr_mobile_inpText" class="inpText fRight transition300">enter<br>mobile number or email</div>',b+="</div>  ",b+=' <div class="inputCont fLeft fmOpenR">',b+='<input type="password" id="pr_pass" name="pr_pass" autocomplete="off" readonly maxlength="20" onKeyPress="common.eSubmit(event,\'lgSubmit\');" class="txtInput cOrange fmOpenR font14 passwordIcon">',b+='<label for="pr_pass" class="inp-label transition100">PASSWORD</label>',b+='<div id="pr_pass_inpText" class="inpText fRight transition300">enter your<br>password</div>',b+="</div>  ",b+='<div class="cancelLgBtn fLeft fmOpenR" id="lgCancel" onclick="common.closeLoginForm();"> CANCEL</div>',b+='<div class="loginBtn fLeft fmOpenR" id="lgSubmit" onclick="common.submitLoginForm('+a+');">LOGIN</div>',b+='<div class="signuplink fmOpenB fLeft">',b+='<center class="w50 fLeft"><a href="'+DOMAIN+'Forgot-Password" style="color:#171334;"><span>Forgot Password?</span></a></center>',b+='<center class="w50 fLeft"><a href="'+DOMAIN+'Sign-Up"><span>Sign Up with Us</span></a></center>',b+="</div>",b+="</div>",$("body").append(b),$("input").bind("focus",function(){$(this).attr("readonly",!1)}),$("input[type=tel], input[type=password]").bind("focus",function(){$(this).siblings("label, i").addClass("labelActive"),$(this).addClass("brOrange"),$(".bsText").addClass("op0")}),$("input[type=tel], input[type=password]").bind("blur",function(){0===$(this).val().length&&void 0===$(this).attr("placeholder")?($(this).siblings("label, i").removeClass("labelActive"),$(this).removeClass("brOrange brGreen")):$(this).removeClass(" ").addClass("brGreen")}),$("#loginDiv").velocity({opacity:0},{delay:0,duration:0}),$("#overlay1").velocity({opacity:0},{delay:0,duration:0});var f=(customStorage.readFromStorage("mobile"),customStorage.readFromStorage("name"),customStorage.readFromStorage("email"),customStorage.readFromStorage("isLoggedIn"));void 0!=f&&""!=f&&null!=f&&0!=f||($("#overlay1,#loginDiv").removeClass("dn"),setTimeout(function(){$("#overlay1").velocity({opacity:1},{delay:0,duration:300,ease:"swing"}),$("#loginDiv").velocity({opacity:1},{delay:200,duration:100,ease:"swing"})},10))},this.submitLoginForm=function(vd){var pr_mobile=$("#pr_mobile").val(),pr_pass=$("#pr_pass").val();if(""==pr_mobile)return customStorage.toast(0,"Mobile/Email Should Not Be Empty"),void $("#pr_mobile").focus();if(""==pr_pass)return customStorage.toast(0,"Login Password Should Not Be Empty"),void $("#pr_pass").focus();var tmstmp=(new Date).getTime();$.ajax({url:DOMAIN+"apis/index.php?action=logUser&mobile="+pr_mobile+"&password="+pr_pass+"&timestamp="+tmstmp,success:function(result){var obj=eval("("+result+")"),errCode=obj.error.code;if(0==errCode){if(1==submiter1){submiter1=!1;var userid=obj.results.uid,username=obj.results.username,is_vendor=obj.results.utype,expire_flag=obj.results.expire_flag,email=obj.results.email,isComp=obj.results.isC,pass_flag=obj.results.pass_flag,mobile=obj.results.mobile,busiType=obj.results.busiType,af=obj.results.af;customStorage.addToStorage("isLoggedIn",!0),customStorage.addToStorage("l",mobile),customStorage.addToStorage("mobile",mobile),customStorage.addToStorage("name",username),customStorage.addToStorage("email",email),customStorage.addToStorage("isComp",isComp),customStorage.addToStorage("userid",userid),customStorage.addToStorage("username",username),customStorage.addToStorage("busiType",busiType);var tmp_is_vendor=is_vendor;if(0!=is_vendor&&"0"!=is_vendor||(tmp_is_vendor=-1),customStorage.addToStorage("is_vendor",tmp_is_vendor),0!=pass_flag)return void window.location.assign(DOMAIN+"Change-Password");if("1"==is_vendor)if("0"!=isComp&&"1"!=isComp||"0"!=af&&""!=af)if("2"===isComp&&"1"==af){var catid=parseInt(busiType.charAt(0))-1;window.location.assign(DOMAIN+"index.php?case=vendor_landing&catid=1000"+catid)}else"2"!==isComp&&"1"==af?window.location.assign(DOMAIN+"index.php?case=vendor_Form&uid="+userid):"1"!==af&&"1"!==expire_flag&&"2"==isComp?window.location.assign(DOMAIN+"index.php?case=inactive_vendor&uid="+userid):"1"===af||"1"!=expire_flag&&1!=expire_flag||window.location.assign(DOMAIN+"index.php?case=expiredSub_vendor&uid="+userid);else window.location.assign(DOMAIN+"index.php?case=vendor_Form&uid="+userid);else if(2==is_vendor)window.location.assign(DOMAIN+"index.php?case=vendorList&uid="+userid);else if(customStorage.removeFromStorage("busiType"),_this.checkLogin(),_this.closeLoginForm(),_this.changeStyle("all"),vd){var dthis=$("#userSubmit");showVendorDetails(),$("#userForm").velocity({scale:0},{delay:0,ease:"swing"}),$("#overlay").velocity({opacity:0},{delay:100,ease:"swing"}),setTimeout(function(){$("#overlay,#userForm").addClass("dn"),submiter1=!0},1010)}else window.location.assign(DOMAIN)}}else customStorage.toast(0,"Invalid Login Credentials")}})},this.eSubmit=function(a,b){var c=a.which?a.which:a.keyCode;13===c&&$("#"+b).click()},this.validate_mobile=function(a){var b=/^[7,8,9]{1}[0-9]{9}$/,c=!0;return""==a||null==a||void 0==a?c=!1:0==b.test(a)&&(c=!1),c},this.validate_email=function(a,b){var c=!0;return c=""!=a&&null!=a&&void 0!=a&&((!b||a.indexOf("IFtoSI")!=-1)&&_this.isValidEmail(a))},this.isValidEmail=function(a){var b=!0,c=a.indexOf("@"),d=a.lastIndexOf("."),e=a.indexOf(" ");return(c<1||d<c+2||d+2>=a.length||e!=-1)&&(b=!1),b},this.changeStyle=function(a){"all"==a?(void 0!==$("#ur_mobile")&&null!==$("#ur_mobile")&&"undefined"!==$("#ur_mobile")&&"undefined"!=typeof $("#ur_mobile")&&($("#ur_mobile").addClass("mobileIcon"),$("#ur_mobile").addClass("brOrange"),$("#ur_mobile").addClass("brGreen"),$("#ur_mobile").siblings("label").addClass("labelActive")),void 0!==$("#ur_name")&&null!==$("#ur_name")&&"undefined"!==$("#ur_name")&&"undefined"!=typeof $("#ur_name")&&($("#ur_name").addClass("nameIcon"),$("#ur_name").addClass("brOrange"),$("#ur_name").addClass("brGreen"),$("#ur_name").siblings("label").addClass("labelActive")),void 0!==$("#ur_email")&&null!==$("#ur_email")&&"undefined"!==$("#ur_email")&&"undefined"!=typeof $("#ur_email")&&($("#ur_email").addClass("emailIcon"),$("#ur_email").addClass("brOrange"),$("#ur_email").addClass("brGreen"),$("#ur_email").siblings("label").addClass("labelActive"))):"mobile"==a?void 0!==$("#ur_mobile")&&null!==$("#ur_mobile")&&"undefined"!==$("#ur_mobile")&&"undefined"!=typeof $("#ur_mobile")&&($("#ur_mobile").addClass("mobileIcon"),$("#ur_mobile").addClass("brOrange"),$("#ur_mobile").addClass("brGreen"),$("#ur_mobile").siblings("label").addClass("labelActive")):"name"==a?void 0!==$("#ur_name")&&null!==$("#ur_name")&&"undefined"!==$("#ur_name")&&"undefined"!=typeof $("#ur_name")&&($("#ur_name").addClass("nameIcon"),$("#ur_name").addClass("brOrange"),$("#ur_name").addClass("brGreen"),$("#ur_name").siblings("label").addClass("labelActive")):"email"==a&&void 0!==$("#ur_email")&&null!==$("#ur_email")&&"undefined"!==$("#ur_email")&&"undefined"!=typeof $("#ur_email")&&($("#ur_email").addClass("emailIcon"),$("#ur_email").addClass("brOrange"),$("#ur_email").addClass("brGreen"),$("#ur_email").siblings("label").addClass("labelActive"))},this.getWishListCount=function(){var a=customStorage.readFromStorage("userid");if(void 0!==a&&null!==a&&""!==a){var b=(new Date).getTime(),c="action=ajx&case=getWishListCount&userid="+encodeURIComponent(a)+"&timestamp="+b,d=DOMAIN+"index.php";$.get(d,c,function(a){void 0!==a&&null!==a&&""!==a?($("#wishListCnt").html(" ("+a+")"),$("#lftWshCnt").html(a),$("#lftWshCnt").removeClass("dn")):($("#wishListCnt").html("(0)"),$("#lftWshCnt").html(0),$("#lftWshCnt").removeClass("dn"))})}},this.goToUrl=function(a){void 0!==a&&null!==a&&""!==a&&(window.location.href=a)},this.goToWishlist=function(){var b=(customStorage.readFromStorage("isLoggedIn"),customStorage.readFromStorage("is_vendor")),c=customStorage.readFromStorage("userid");void 0!==b&&null!==b&&"undefined"!=typeof b&&""!==b?(b!=-1&&"-1"!=b||(b=0),0==b&&(window.location.href=DOMAIN+"wishlist/"+c)):window.location.href=DOMAIN+"?case=login"},this.IND_money_format=function(a){var b="";a=a.toString().split("").reverse();for(var c=a.length,d=0;d<c;d++)(3==d||d>3&&(d-1)%2==0)&&d!==c&&(b+=","),b+=a[d];return b.split("").reverse().join("")},this.showCertificate=function(a){var b=window.open(a,"_blank");b.focus()},this.msg=function(a,b){toastr.remove(),0!=a&&2!=a||(a="info"),4==a&&(a="success"),$("danger"===a?function(){toastr.error(b)}:"info"===a?function(){toastr.info(b)}:"success"===a?function(){toastr.success(b)}:function(){})},toastr.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:1,positionClass:"toast-top-right",preventDuplicates:!0,showDuration:"100",hideDuration:"800",timeOut:"1000",extendedTimeOut:"1000",showEasing:"",hideEasing:"",showMethod:"slideDown",hideMethod:"slideUp"},this.decodeMsg=function(a){return decodeURIComponent(a.replace(/\+/g," "))},this.encodeMsg=function(a){return encodeURIComponent(a)},this.uid=function(){var a=webstore.get("uid");return a},this.appendDiv=function(a,b,c){if(""!=c){var d=document.getElementById(a);d.innerHTML=b?c:d.innerHTML+c}},this.replaceURLWithHTMLLinks=function(a){var b=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return a.replace(b,"<a href='$1' target='_blank'>$1</a>")},this.getParameterByName=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null==c?"":decodeURIComponent(c[1].replace(/\+/g," "))},this.redirect=function(a){window.location=a},this.capitaliseFirstLetter=function(a){var b=a.value;""!=b&&(a.value=b.charAt(0).toUpperCase()+b.slice(1))},this.capitalize=function(a){var b=a.value.toLowerCase();""!=b&&(a.value=b.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}))},this.castLowerCase=function(a){document.getElementById(a).value=document.getElementById(a).value.toLowerCase()}}function showVendorProfile(){var a=customStorage.readFromStorage("userid");window.location.href=DOMAIN+"index.php?case=vendor_Form&uid="+a}function showProductList(){var a=customStorage.readFromStorage("userid"),b=customStorage.readFromStorage("is_vendor");2==b&&($("#productstab").bind("click",function(){window.location.href=DOMAIN+"index.php?case=product_list&uid="+a}),$("#vendorlist").bind("click",function(){window.location.href=DOMAIN+"index.php?case=vendorList&uid="+a}))}function changeHIdVal(a){13==a.keyCode&&$("#ur_cityid").val("1")}var common=new Common;common.checkLogin();var submiter1=!0;$("#mMenuBtn").click(function(){$(".menuList").scrollTop(0)});
