function setCityId(a){13==a.keyCode&&$("#pr_cityid").val("1")}function isValidMKey(a,b){var c=$("#"+b).val(),e=(c.length,/^[7-9]/g),c=c.match(e);null==c&&$("#"+b).val("")}function requestOTP(){$("#overlay").removeClass("dn"),$("#otpDiv").removeClass("dn"),setTimeout(function(){$("#overlay").velocity({opacity:1},{delay:0,duration:300,ease:"swing"}),$("#optDiv").velocity({scale:1},{delay:80,duration:100,ease:"swing"})},10)}function otpCheck(){var otpProvided=$("#pr_otp").val(),mobile=customStorage.readFromStorage("mobile"),isValid="";$.ajax({url:DOMAIN+"apis/index.php?action=validOTP&mobile="+mobile+"&vc="+otpProvided,success:function(result){var obj=jQuery.parseJSON(result),errCode=obj.error.Code;if(0==errCode||"0"==errCode)if(isValid=!0,"forgot"==pageName)$.ajax({url:DOMAIN+"apis/index.php?action=forgotPwd&email="+mobile,success:function(a){var b=jQuery.parseJSON(a),c=b.error.Code,d=b.error.Msg;1==c?customStorage.toast(0,d):(customStorage.toast(1,d),setTimeout(function(){$("#overlay,#otpDiv").addClass("dn"),$("#otpDiv,#overlay").remove()},10),setTimeout(function(){window.location.assign(DOMAIN+"Login")},4e3))}});else{var pr_name=encodeURIComponent($("#pr_name").val()),pr_mobile=encodeURIComponent($("#pr_mobile").val()),pr_email=encodeURIComponent($("#pr_email").val()),pr_pass=encodeURIComponent($("#pr_pass").val()),pr_city=encodeURIComponent($("#pr_city").val()),isVendor=$("#isVendor").val(),amIVendor=$("input[type=checkbox]:checked").length;isValid=!1;var userType=isVendor;isVendor=1==isVendor?1:-1,$.ajax({url:DOMAIN+"apis/index.php?action=userReg&username="+pr_name+"&password="+pr_pass+"&mobile="+pr_mobile+"&cityname="+pr_city+"&email="+pr_email+"&isvendor="+userType,success:function(result){var obj=eval("("+result+")"),errCode=obj.error.code;if(0==errCode){var userid=obj.userid;customStorage.addToStorage("isLoggedIn",!0),customStorage.addToStorage("userid",userid),customStorage.addToStorage("mobile",pr_mobile),customStorage.addToStorage("username",decodeURIComponent(pr_name)),customStorage.addToStorage("is_vendor",decodeURIComponent(isVendor)),customStorage.addToStorage("email",decodeURIComponent(pr_email)),customStorage.addToStorage("name",decodeURIComponent(pr_name)),customStorage.addToStorage("city",decodeURIComponent(pr_city)),1===isVendor?(customStorage.removeFromStorage("busiType"),window.location.assign(DOMAIN+"index.php?case=vendor_Form&uid="+userid)):$.ajax({url:DOMAIN+"apis/index.php?action=sendWelcomeMailSMS&username="+decodeURIComponent(pr_name)+"&mobile="+decodeURIComponent(pr_mobile)+"&email="+decodeURIComponent(pr_email)+"&isVendor="+decodeURIComponent(userType),success:function(result){var obj=eval("("+result+")"),errCode=obj.error.code;0==errCode&&(customStorage.toast(1,"Registration Successfully Done"),setTimeout(function(){window.location.assign(DOMAIN),submiter=!0},2500))}})}else customStorage.toast(0,"Registration Unsuccessfull")}})}else 1!=errCode&&"1"!=errCode||(customStorage.toast(0,"OTP verification Unsuccessful"),isValid=!1)}})}function signUpProceed(){var pr_name=$("#pr_name").val(),pr_mobile=$("#pr_mobile").val(),pr_email=$("#pr_email").val(),pr_pass=$("#pr_pass").val(),pr_city=$("#pr_city").val(),isVendor=$("#isVendor").val(),amIVendor=$("input[type=checkbox]:checked").length;isValid=!1;var userType=isVendor;isVendor=1==isVendor?1:-1,$.ajax({url:DOMAIN+"apis/index.php?action=userReg&username="+pr_name+"&password="+pr_pass+"&mobile="+pr_mobile+"&cityname="+pr_city+"&email="+pr_email+"&isvendor="+userType,success:function(result){var obj=eval("("+result+")"),errCode=obj.error.code;if(0==errCode){var userid=obj.userid;customStorage.addToStorage("isLoggedIn",!0),customStorage.addToStorage("userid",userid),customStorage.addToStorage("mobile",pr_mobile),customStorage.addToStorage("username",pr_name),customStorage.addToStorage("is_vendor",isVendor),customStorage.addToStorage("email",pr_email),customStorage.addToStorage("name",pr_name),customStorage.addToStorage("city",pr_city),1===isVendor?(customStorage.removeFromStorage("busiType"),window.location.assign(DOMAIN+"index.php?case=vendor_Form&uid="+userid)):$.ajax({url:DOMAIN+"apis/index.php?action=sendWelcomeMailSMS&username="+pr_name+"&mobile="+pr_mobile+"&email="+pr_email+"&isVendor="+userType,success:function(result){var obj=eval("("+result+")"),errCode=obj.error.code;0==errCode&&(customStorage.toast(1,"Registration Successfully Done"),setTimeout(function(){window.location.assign(DOMAIN)},2500))}})}else customStorage.toast(0,"Registration Unsuccessfull")}})}function otpGo(a){var a=$("#pr_mobile").val().trim(),b=$("#pr_otp").val().trim(),c=!1;b=parseFloat(b),""==b||b<=0||void 0==b||"undefined"==b?customStorage.toast(0,"OTP value provided is not proper"):$.ajax({url:DOMAIN+"apis/index.php?action=sendOTP&mb="+a,success:function(a){var b=jQuery.parseJSON(a),d=b.code;return 1==d?(c=!0,customStorage.toast(1,"OTP is sent to your mobile number"),c):0==d?(customStorage.toast(0,"OTP sending failed"),c):void 0}})}function closeOtpForm(){$("#otpDiv").velocity({scale:0},{delay:0,ease:"swing"}),window.history.back(),$("#overlay").velocity({opacity:0},{delay:100,ease:"swing"}),setTimeout(function(){$("#overlay,#otpDiv").addClass("dn"),$("#otpDiv,#overlay").remove()},1010)}function onEnterFormSubmit(a,b){var c=a.which?a.which:a.keyCode;13==c&&1==b&&otpCheck()}function checkOtp(){var a=$("#pr_otp").val(),b=customStorage.readFromStorage("mobile");$.ajax({url:DOMAIN+"apis/index.php?action=validOTP&mobile="+b+"&vc="+a,success:function(a){var b=jQuery.parseJSON(a),c=b.error.Code;0==c||"0"==c?isValid=!0:1!=c&&"1"!=c||(isValid=!1)}})}function arrangeData(a,b,c,d){if(a.results){var e="<ul class='smallField w100 fmRoboto transition300 font14 pointer border1'>";return $.each(a.results,function(a,c){"#pr_city"==b&&(e+="<li id='suggest"+a+"' class='autoSuggestRow w100 transition300 txtCaCase txtOverFlow txtOver' title="+c.n+" style='text-transform:capitalize;' onClick='setSuggestValue(\""+c.n+'","#pr_city","'+c.id+"\");'>"+c.n+"</li>"),"#ur_city"==b&&(e+="<li id='suggest"+a+"' class='autoSuggestRow w100 transition300 txtCaCase txtOverFlow txtOver' title="+c.n+" style='text-transform:capitalize;' onClick='setCityValue(\""+c.n+'","#ur_city","'+c.id+"\");'>"+c.n+"</li>")}),e+="</ul>"}return""}function setSuggestValue(a,b,c){$(b).val(a),$("#pr_cityid").val(b),$(b).next("label").addClass("labelActive"),$(b).addClass("brGreen"),setTimeout(function(){$("#pr_citySuggestDiv").addClass("dn")},50)}function setCityValue(a,b,c){$(b).val(a),$("#ur_cityid").val(a),$(b).next("label").addClass("labelActive"),$(b).addClass("brGreen"),setTimeout(function(){$("#ur_citySuggestDiv").addClass("dn")},50)}function closeSuggest(a){setTimeout(function(){$("#"+a).html("")},10)}function changeHIdVal(a){13==a.keyCode&&$("#ur_cityid").val("1"),""==$("#ur_city").val()&&$("#ur_cityid").val("")}var input_selector="input[type=text],  input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea, input[type=radio]",pw=$(window).width(),ph=$(window).height(),isMobile=!1;pw<768&&(isMobile=!0);var submiter=!0,validMob=!0;isMobile&&$(input_selector).focus(function(){var a=$("html,body").scrollTop()+40;$("html,body").animate({scrollTop:a},100)}),$(input_selector).bind("focus",function(){$(this).siblings("label, i").addClass("labelActive"),$(this).addClass("brOrange"),$(".bsText").addClass("op0")}),$(input_selector).bind("blur",function(){0===$(this).val().length&&void 0===$(this).attr("placeholder")?($(this).siblings("label, i").removeClass("labelActive"),$(this).removeClass("brOrange brGreen")):$(this).removeClass(" ").addClass("brGreen")}),$(input_selector).bind("keyup",function(){var a=$(this).val(),b=a.length,c=$(this).attr("id"),d=5;b>=d?$("#"+c+"_inpText").addClass("op0"):b<d&&$("#"+c+"_inpText").removeClass("op0")}),$("#pr_mobile").focus(function(){$("#pr_citySuggestDiv").addClass("dn")}),$("#signupCancel").click(function(){$("input").val("");var a=document.referrer;$("#isVendor").removeAttr("checked");var a=document.referrer;setTimeout(function(){window.location.assign(a)},20),window.location.assign(a)}),$("#signupSubmit").bind("click",function(){$("#pr_citySuggestDiv").hasClass("dn")||$("#pr_citySuggestDiv").addClass("dn");var a=$("#pr_name").val(),b=$("#pr_mobile").val(),c=$("#pr_email").val(),d=$("#pr_pass").val(),e=$("#pr_city").val(),f=$("#pr_cityid").val(),g=$("#isVendor").is(":checked");g=$("#isVendor").val();var j=($("input[type=checkbox]:checked").length,g),k=/^[A-Za-z\+*?\s]+$/;g=1==g||"1"==g?1:-1;var l=$("#isVendor").val();setTimeout(function(){if(0==a.length||""==a)return customStorage.toast(0,"Please Enter the Name"),$("#pr_name").focus(),!1;if(0==a.length||isNaN(a)!==!0||0==k.test(a))return customStorage.toast(0,"Invalid format for Name"),$("#pr_name").focus(),!1;if(""==e||!a.match(k))return customStorage.toast(0,"City is mandatory!"),$("#pr_city").focus(),!1;if(""==f)return customStorage.toast(0,"Choose the city from the list"),$("#pr_cityid").focus(),!1;if(""==b||0==b.length)return customStorage.toast(0,"Please Enter the Mobile no."),$("#pr_mobile").focus(),!1;if(""==b||10!=b.length||isNaN(b))return customStorage.toast(0,"Invalid format for Mobile"),$("#pr_mobile").focus(),!1;if(""==c)return customStorage.toast(0,"Email is Required!"),$("#pr_email").focus(),!1;if(!common.validateEmail("pr_email"))return customStorage.toast(0,"Email is Not Valid!"),$("#pr_email").focus(),!1;if(""==d)return customStorage.toast(0,"Password is Required!"),$("#pr_pass").focus(),!1;if(d.length<=5||0==d)return customStorage.toast(0,"Password must have minimum 6 characters!"),$("#pr_pass").focus(),!1;if(10==b.length&&common.validateEmail("pr_email")){var h=(new Date).getTime();$.ajax({url:DOMAIN+"apis/index.php?action=checkUser&mobile="+b+"&email="+c+"&isVendor="+l+"&timestamp="+h,success:function(a){var c=jQuery.parseJSON(a),d=c.error.type.code;return 3==d?(customStorage.toast(0,"Mobile number is already registered!"),$("#pr_mobile").focus(),!1):2==d?(customStorage.toast(0,"Email id is already registered!"),$("#pr_email").focus(),!1):void(4==d?customStorage.toast(0,c.error.type.flagMsg):5==d?(g==-1&&(j=0),b=customStorage.addToStorage("mobile",b),otpGo(b),requestOTP()):0==c.error.type&&(g==-1&&(j=0),b=customStorage.addToStorage("mobile",b),otpGo(b),requestOTP()))}})}},250)}),$(".amIVendor").change(function(){$(".amIVendor").not(this).prop("checked",!1)}),$("#pr_city").bind("keyup focus",input_selector,function(a){var b="action=cityName&name="+escape($(this).val());new Autosuggest($(this).val(),"#pr_city","#pr_citySuggestDiv",DOMAIN+"apis/index.php",b,!0,"","",a)}),$("body").click(function(){$("#pr_citySuggestDiv").addClass("dn"),$("#ur_citySuggestDiv").addClass("dn")}),$(document).ready(function(){var a=customStorage.readFromStorage("userid");null!=a&&void 0!=a&&"undefined"!=a&&"null"!=a&&""!=a||$("#vsignup").removeClass("dn"),$("#ur_city").bind("keyup focus",input_selector,function(a){var b="action=cityName&name="+escape($(this).val());new Autosuggest($(this).val(),"#ur_city","#ur_citySuggestDiv",DOMAIN+"apis/index.php",b,!0,"","",a)})});
