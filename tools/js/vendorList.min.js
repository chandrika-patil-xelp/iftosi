function changeStatus(uid,obj){var st=0;setTimeout(function(){var pLeft=$(obj).find(".button").position().left;st=0==pLeft?1:0;var tmstmp=(new Date).getTime(),URL=DOMAIN+"index.php?action=ajx&case=updateStatus&userid="+uid+"&af="+st+"&timestamp="+tmstmp;$.ajax({url:URL,type:"POST",success:function(res){var expObj=eval("("+res+")"),expiry=expObj.results.expiry;if(null!==expiry&&void 0!==expiry&&"undefined"!==expiry&&"null"!==expiry&&""!==expiry&&$("#vndExpDate"+uid).text(expiry),null!==uid){var params="action=Vpactive&vid="+uid+"&af="+st+"&timestamp="+tmstmp,URL=APIDOMAIN+"index.php";$.getJSON(URL,params,function(a){null!==a&&void 0!==a&&""!==a&&"null"!==a&&"undefined"!==a&&"undefined"!=typeof a&&""!==a.error&&null!==a.error&&void 0!==a.error&&"undefined"!==a.error&&"undefined"!=typeof a.error&&0==a.error.code&&($(obj).toggleClass("toggle-button-selected"),1==st?customStorage.toast(1,"Vendor status is changed"):0==st&&customStorage.toast(0,"Vendor status is changed"))})}}})},350)}function loadProducts(a){var b=(new Date).getTime();$.ajax({url:APIDOMAIN+"index.php?action=vendorlist&pgno="+a+"&limit=50&timestamp="+b,success:function(b){loadProductsCallback(b,a)}})}function loadProductsCallback(a,b){var c=jQuery.parseJSON(a);if(""!=c.results){$("#pgno").val(b);var d=c.results.total_vendors;$("#totalProducts").text(d);var e=c.results.total_vendors,f="";if(0!=d){e==currentPage&&(loadProduct=!1);for(var g=c.results.vendors.length,h=0;h<g;)f+=generateVendorsList(c.results.vendors[h]),h++;var i=pagination(c,b)}else f='<div class="noRecords"><span>Sorry! No Vendors Found!</span></div>',loadProduct=!1;$("#vendorLists").html(f),$("#vendorLists").append(i),$(".pgComm").click(function(){$(".pgComm").removeClass("pgActive"),$(this).addClass("pgActive"),loadProducts($(this).text()),$("html,body").animate({scrollTop:$(".listContainer").offset().top-100},300)}),paginationPrevNext()}else loadProduct=!1}function generateVendorsList(a){var b='<div class="listComm fLeft fmOpenR">';b+='<div class="fLeft vndName poR">',b+='<div class="infrIcn" onclick="openlogin('+a.vendor_id+')"></div>',b+='   <div class="nameLocatCont fLeft txtOver hedofc" id="cn_14267019859310">'+a.orgName+" -"+a.city+"</div>",b+='    <div class="mobileEmailCont fLeft cBlue txtOver">',b+='        <div class="fLeft font12">',b+='            <div class="mbIcon fLeft" id="mo_14267019859310">'+a.contact_mobile+"</div>",b+='            <div class="emIcon fLeft txtOver" id="em_14267019859310" txtOver>'+a.email+"</div>",b+="        </div>",b+='        <div class="fLeft font12">',b+='            <div class="pnIcon fLeft" id="mo_14267019859310">'+a.pancard+"</div>",b+='            <div class="vatIcon fLeft txtOver" id="em_14267019859310">'+a.vatno+"</div>",b+="        </div>",b+="    </div>",b+="</div>";var c=a.pay_amount,d=a.vendor_id,e=new Array,f=a.business_type.split(","),g=a.expiry_show;if("Not Available"!=g)var h=g.substring(g.indexOf(" "),g.indexOf(" ")+4),g=g.replace(g.substring(g.indexOf(" "),g.indexOf(",")),h);for(var i=0;i<f.length;i++)1==f[i]&&e.push("Diamonds"),2==f[i]&&e.push("Jewellery"),3==f[i]&&e.push("Bullion");b+='<div class="fLeft vndPackage">'+e.join()+"</div>",b+='<div class="fLeft vndAmount">'+c+"</div>",b+='<div class="fLeft vndExpDate" id="vndExpDate'+d+'">'+g+"</div>",b+='<div class="fLeft vndEdit">';var j="";return"1"==a.active_flag&&(j="toggle-button-selected"),b+='    <div class="toggle-button '+j+'" onclick="changeStatus('+a.vendor_id+',this)">',b+='        <span class="fActive">Yes</span>',b+='        <button class="button"></button>',b+='        <span class="fDactive">No</span>',b+="    </div>",b+="</div>",b+="</div>"}function pagination(a,b){b*=1;var c="",d=a.results.total_vendors,e=Math.ceil(d/50),f=2;if($("#total_pageno").val(e),e>1){if(c+='<div class="fLeft pagination fmOpenR">',c+="<center>",c+='<div class="pPrev poR ripplelink">Previous</div>',e<7+2*f)for(var g=1;g<=e;g++)c+=g==b?'<div class="pgComm poR ripplelink pgActive">'+g+"</div>":'<div class="pgComm poR ripplelink">'+g+"</div>";else if(e>5+2*f)if(b<1+2*f){for(var g=1;g<4+2*f;g++)c+=g==b?'<div class="pgComm poR ripplelink pgActive">'+g+"</div>":'<div class="pgComm poR ripplelink">'+g+"</div>";c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgComm poR ripplelink">'+e+"</div>"}else if(e-2*f>b&&b>2*f){c+='<div class="pgComm poR ripplelink">1</div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>';for(var g=b-f;g<=b+f;g++)c+=g==b?'<div class="pgComm poR ripplelink pgActive">'+g+"</div>":'<div class="pgComm poR ripplelink">'+g+"</div>";c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgComm poR ripplelink">'+e+"</div>"}else{c+='<div class="pgComm poR ripplelink">1</div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>',c+='<div class="pgEmpty"></div>';for(var g=e-(2+2*f);g<=e;g++)c+=g==b?'<div class="pgComm poR ripplelink pgActive">'+g+"</div>":'<div class="pgComm poR ripplelink">'+g+"</div>"}c+='<div class="pNext poR ripplelink">Next</div>',c+="</center>",c+="</div>"}return c}function paginationPrevNext(){$(".pPrev").bind("click",function(){var a=parseInt($("#pgno").val()),b=a-1;a>1&&($("#pgno").val(b),loadProducts(pageName.indexOf("vendorList")!==-1?b:1))}),$(".pNext").bind("click",function(){var a=parseInt($("#pgno").val()),b=a+1;a<parseInt($("#total_pageno").val())&&($("#pgno").val(b),loadProducts(pageName.indexOf("vendorList")!==-1?b:1))})}function searchVendor(a,b){if(b||(b=1),""!=a){var c=(new Date).getTime();$.ajax({url:DOMAIN+"apis/index.php?action=getVendorBySearch&srchTxt="+encodeURIComponent(a)+"&page="+b+"&limit=50&timestamp="+c,success:function(a){searchVendorCallback(a,b)}}),searchScrollValue=a}else $("#vendorLists").removeClass("dn"),$("#svendorLists").html("").addClass("dn")}function searchVendorCallback(res,pgno){var obj=eval("("+res+")");if(""!==obj.results){var total=obj.results.total_vendors;if(0!=total){$("#vendorLists").addClass("dn"),$("#svendorLists").removeClass("dn");for(var len=obj.results.vendors.length,i=0,str="";i<len;)str+=generateVendorsList(obj.results.vendors[i]),i++;var html=pagination(obj,pgno);void 0!==str&&null!==str&&""!==str&&($("#svendorLists").append(str),$("#svendorLists").html(str),$("#svendorLists").append(html),$(".pgComm").click(function(){$(".pgComm").removeClass("pgActive"),$(this).addClass("pgActive");var a=$("#searchVendor").val();a(a,$(this).text()),$("#pgno").val($(this).text()),$("html,body").animate({scrollTop:$("#svendorLists").offset().top-100},300)}))}else if(1==pgno){var str='<div class="noResult fLeft fmopenR"><span>Sorry! No Vendors Found!</span></div>';$("#svendorLists").html(str)}}}var uid=customStorage.readFromStorage("userid"),is_vendor=customStorage.readFromStorage("is_vendor"),userName=customStorage.readFromStorage("name");$("#userName").html(userName.split(" ")[0]),$(document).ready(function(){});var loadProduct=!0,currentPage=1;loadProducts(1),$(".pPrev").bind("click",function(){var a=parseInt($("#pgno").val()),b=a-1;a>1&&($("#pgno").val(b),loadProducts(pageName.indexOf("vendorList")!==-1?b:1))}),$(".pNext").bind("click",function(){var a=parseInt($("#pgno").val()),b=a+1;a<parseInt($("#total_pageno").val())&&($("#pgno").val(b),loadProducts(pageName.indexOf("vendorList")!==-1?b:1))});
